

# è´¢å¯Œæµ‹è¯„æ¿€æ´»ç ç®¡ç†æ¨¡å—å®žæ–½è®¡åˆ’

## åŠŸèƒ½æ¦‚è¿°

åœ¨ç®¡ç†åŽå°æ–°å¢žã€Œæ¿€æ´»ç ç®¡ç†ã€æ¨¡å—ï¼Œæ”¯æŒæ‰¹é‡ç”Ÿæˆæ¿€æ´»ç ã€å¯¼å‡ºã€æŸ¥çœ‹ä½¿ç”¨æƒ…å†µç­‰åŠŸèƒ½ã€‚

## ç³»ç»Ÿæž¶æž„

```text
ç®¡ç†åŽå° /admin/activation-codes
              â”‚
              â”œâ”€â”€ æ•°æ®ç»Ÿè®¡å¡ç‰‡
              â”‚   â”œâ”€â”€ æ€»æ¿€æ´»ç æ•°
              â”‚   â”œâ”€â”€ å·²ä½¿ç”¨æ•°
              â”‚   â”œâ”€â”€ æœªä½¿ç”¨æ•°
              â”‚   â””â”€â”€ å·²è¿‡æœŸæ•°
              â”‚
              â”œâ”€â”€ æ‰¹é‡ç”Ÿæˆå¯¹è¯æ¡†
              â”‚   â”œâ”€â”€ ç”Ÿæˆæ•°é‡
              â”‚   â”œâ”€â”€ æ‰¹æ¬¡åç§°
              â”‚   â”œâ”€â”€ æ¥æºæ¸ é“
              â”‚   â”œâ”€â”€ æœ‰æ•ˆæœŸè®¾ç½®
              â”‚   â””â”€â”€ å¯¼å‡ºCSVç»“æžœ
              â”‚
              â””â”€â”€ æ¿€æ´»ç åˆ—è¡¨è¡¨æ ¼
                  â”œâ”€â”€ æœç´¢/ç­›é€‰
                  â”œâ”€â”€ çŠ¶æ€æ˜¾ç¤º
                  â”œâ”€â”€ ä½¿ç”¨è€…ä¿¡æ¯
                  â””â”€â”€ æ“ä½œï¼ˆå¤åˆ¶/ä½œåºŸï¼‰
```

## å®žæ–½æ­¥éª¤

### æ­¥éª¤ä¸€ï¼šåˆ›å»ºæ¿€æ´»ç ç®¡ç†ç»„ä»¶

æ–°å»º `src/components/admin/ActivationCodeManagement.tsx`ï¼š

**åŠŸèƒ½æ¨¡å—**ï¼š
1. **ç»Ÿè®¡å¡ç‰‡**ï¼šæ˜¾ç¤ºæ€»æ•°ã€å·²ç”¨ã€æœªç”¨ã€è¿‡æœŸæ•°é‡
2. **åˆ—è¡¨è¡¨æ ¼**ï¼šå±•ç¤ºæ‰€æœ‰æ¿€æ´»ç è¯¦æƒ…
3. **æœç´¢ç­›é€‰**ï¼šæŒ‰æ‰¹æ¬¡ã€çŠ¶æ€ã€æ¥æºæ¸ é“ç­›é€‰
4. **å¤åˆ¶åŠŸèƒ½**ï¼šä¸€é”®å¤åˆ¶æ¿€æ´»é“¾æŽ¥

**å¤ç”¨çŽ°æœ‰æ¨¡å¼**ï¼š
- å‚è€ƒ `BloomPartnerInvitations.tsx` çš„è¡¨æ ¼ç»“æž„
- ä½¿ç”¨ `@tanstack/react-query` èŽ·å–æ•°æ®
- ä½¿ç”¨çŽ°æœ‰ UI ç»„ä»¶åº“

### æ­¥éª¤äºŒï¼šåˆ›å»ºæ‰¹é‡ç”Ÿæˆå¯¹è¯æ¡†ç»„ä»¶

æ–°å»º `src/components/admin/ActivationCodeBatchGenerate.tsx`ï¼š

**åŠŸèƒ½**ï¼š
- è®¾ç½®ç”Ÿæˆæ•°é‡ï¼ˆ1-1000ï¼‰
- è®¾ç½®æ‰¹æ¬¡åç§°ï¼ˆå¦‚"2026å¹´2æœˆæ´»åŠ¨"ï¼‰
- è®¾ç½®æ¥æºæ¸ é“ï¼ˆå¦‚"çº¿ä¸‹æ´»åŠ¨"ã€"å…¬ä¼—å·æŽ¨å¹¿"ï¼‰
- è®¾ç½®æœ‰æ•ˆæœŸï¼ˆå¯é€‰ï¼‰
- ç”ŸæˆåŽæ˜¾ç¤ºç»“æžœåˆ—è¡¨
- æ”¯æŒå¯¼å‡º CSV æ–‡ä»¶

**æ¿€æ´»ç æ ¼å¼**ï¼š
- å‰ç¼€ï¼š`WB-`ï¼ˆWealth Blockï¼‰
- éšæœºéƒ¨åˆ†ï¼š8ä½å¤§å†™å­—æ¯+æ•°å­—
- ç¤ºä¾‹ï¼š`WB-A3K9F2XZ`

### æ­¥éª¤ä¸‰ï¼šåˆ›å»ºåŽç«¯ç”Ÿæˆå‡½æ•°

æ–°å»º Edge Function `generate-activation-codes`ï¼š

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»åž‹ | è¯´æ˜Ž |
|------|------|------|
| count | number | ç”Ÿæˆæ•°é‡ï¼ˆ1-1000ï¼‰ |
| batch_name | string | æ‰¹æ¬¡åç§° |
| source_channel | string | æ¥æºæ¸ é“ï¼ˆå¯é€‰ï¼‰ |
| expires_at | string | è¿‡æœŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰ |

**å¤„ç†é€»è¾‘**ï¼š
1. éªŒè¯ç®¡ç†å‘˜æƒé™
2. æ‰¹é‡ç”Ÿæˆå”¯ä¸€æ¿€æ´»ç 
3. æ’å…¥æ•°æ®åº“
4. è¿”å›žç”Ÿæˆçš„æ¿€æ´»ç åˆ—è¡¨

### æ­¥éª¤å››ï¼šæ›´æ–°ç®¡ç†åŽå°è·¯ç”±

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `AdminSidebar.tsx`ï¼šæ·»åŠ ã€Œæ¿€æ´»ç ã€èœå•é¡¹åˆ°ã€Œè¿è¥æ•°æ®ã€åˆ†ç»„
- `AdminLayout.tsx`ï¼šæ·»åŠ è·¯ç”± `/admin/activation-codes`

## æ–‡ä»¶å˜æ›´æ¸…å•

| æ–‡ä»¶ | æ“ä½œ | è¯´æ˜Ž |
|------|------|------|
| `src/components/admin/ActivationCodeManagement.tsx` | æ–°å»º | æ¿€æ´»ç ç®¡ç†ä¸»é¡µé¢ |
| `src/components/admin/ActivationCodeBatchGenerate.tsx` | æ–°å»º | æ‰¹é‡ç”Ÿæˆå¯¹è¯æ¡† |
| `supabase/functions/generate-activation-codes/index.ts` | æ–°å»º | åŽç«¯ç”Ÿæˆé€»è¾‘ |
| `src/components/admin/AdminSidebar.tsx` | ä¿®æ”¹ | æ·»åŠ èœå•é¡¹ |
| `src/components/admin/AdminLayout.tsx` | ä¿®æ”¹ | æ·»åŠ è·¯ç”± |
| `supabase/config.toml` | ä¿®æ”¹ | é…ç½®æ–°å‡½æ•° |

## ç•Œé¢é¢„è§ˆ

### ä¸»é¡µé¢å¸ƒå±€
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è´¢å¯Œæµ‹è¯„æ¿€æ´»ç ç®¡ç†                      [æ‰¹é‡ç”Ÿæˆ] [åˆ·æ–°]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   æ€»æ•°   â”‚ â”‚   å·²ç”¨   â”‚ â”‚   æœªç”¨   â”‚ â”‚   è¿‡æœŸ   â”‚        â”‚
â”‚  â”‚   156    â”‚ â”‚    42    â”‚ â”‚   108    â”‚ â”‚    6     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ” æœç´¢æ¿€æ´»ç ... â”‚ æ‰¹æ¬¡ç­›é€‰ â–¼ â”‚ çŠ¶æ€ç­›é€‰ â–¼ â”‚ æ¸ é“ç­›é€‰ â–¼   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¿€æ´»ç         æ‰¹æ¬¡         æ¸ é“       çŠ¶æ€   ä½¿ç”¨è€…  æ“ä½œ   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  WB-A3K9F2XZ  2æœˆæ´»åŠ¨      çº¿ä¸‹æ´»åŠ¨    æœªç”¨    -      ðŸ“‹    â”‚
â”‚  WB-B7M2P4QS  2æœˆæ´»åŠ¨      çº¿ä¸‹æ´»åŠ¨    å·²ç”¨   å¼ ä¸‰    ðŸ“‹    â”‚
â”‚  WB-C1N5R8TU  1æœˆæŽ¨å¹¿      å…¬ä¼—å·      è¿‡æœŸ    -       -    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰¹é‡ç”Ÿæˆå¯¹è¯æ¡†
```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰¹é‡ç”Ÿæˆæ¿€æ´»ç                     [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”Ÿæˆæ•°é‡                               â”‚
â”‚  [50          ]                         â”‚
â”‚                                         â”‚
â”‚  æ‰¹æ¬¡åç§°                               â”‚
â”‚  [2026å¹´2æœˆçº¿ä¸‹æ´»åŠ¨    ]                â”‚
â”‚                                         â”‚
â”‚  æ¥æºæ¸ é“                               â”‚
â”‚  [çº¿ä¸‹æ´»åŠ¨ â–¼]                          â”‚
â”‚                                         â”‚
â”‚  æœ‰æ•ˆæœŸï¼ˆå¯é€‰ï¼‰                         â”‚
â”‚  [2026-12-31 ðŸ“…]                        â”‚
â”‚                                         â”‚
â”‚           [å–æ¶ˆ]  [ç”Ÿæˆæ¿€æ´»ç ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯ç»†èŠ‚

### æ¿€æ´»ç ç”Ÿæˆç®—æ³•
```typescript
const generateActivationCode = (): string => {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  let code = 'WB-';
  for (let i = 0; i < 8; i++) {
    code += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return code;
};
```
- æŽ’é™¤æ˜“æ··æ·†å­—ç¬¦ï¼šO/0ã€I/1/L
- æ ¼å¼å›ºå®šï¼š`WB-` + 8ä½éšæœºå­—ç¬¦

### å¯¼å‡º CSV æ ¼å¼
```csv
æ¿€æ´»ç ,æ¿€æ´»é“¾æŽ¥,æ‰¹æ¬¡åç§°,æ¥æºæ¸ é“,æœ‰æ•ˆæœŸ
WB-A3K9F2XZ,https://xxx.app/wealth-block-activate?code=WB-A3K9F2XZ,2æœˆæ´»åŠ¨,çº¿ä¸‹æ´»åŠ¨,2026-12-31
```

### æƒé™æŽ§åˆ¶
- ä»…ç®¡ç†å‘˜å¯è®¿é—®æ­¤æ¨¡å—
- Edge Function éªŒè¯ admin è§’è‰²
- RLS ç­–ç•¥å·²åœ¨ä¹‹å‰è¿ç§»ä¸­é…ç½®

## æ‰©å±•åŠŸèƒ½ï¼ˆå¯åŽç»­è¿­ä»£ï¼‰

1. **ä½œåºŸæ¿€æ´»ç **ï¼šæ”¯æŒæ‰‹åŠ¨æ ‡è®°æŸä¸ªæ¿€æ´»ç å¤±æ•ˆ
2. **æ‰¹é‡å¯¼å‡º**ï¼šå¯¼å‡ºæŒ‡å®šæ‰¹æ¬¡çš„æ‰€æœ‰æ¿€æ´»ç 
3. **ä½¿ç”¨ç»Ÿè®¡**ï¼šæŒ‰æ‰¹æ¬¡/æ¸ é“ç»Ÿè®¡æ¿€æ´»çŽ‡å’Œè½¬åŒ–
4. **äºŒç»´ç ç”Ÿæˆ**ï¼šæ‰¹é‡ç”Ÿæˆå¸¦æ¿€æ´»ç çš„äºŒç»´ç å›¾ç‰‡

