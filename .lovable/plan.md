

# 端到端测试：绽放合伙人邀请码兑换流程

## 测试准备

1. 通过数据库迁移插入一条测试邀请记录：
   - 邀请码：`BLOOM-TEST99`
   - 状态：`pending`

2. 使用预览环境中已登录的账号进行测试

## 测试步骤

### 测试 1：在财富测评页面兑换邀请码
1. 导航到 `/wealth-block-assessment`
2. 触发支付弹窗（AssessmentPayDialog）
3. 点击「我有邀请码」
4. 输入 `BLOOM-TEST99`
5. 验证：
   - 兑换成功提示
   - 弹窗关闭
   - 页面显示"继续测评"而非支付按钮

### 测试 2：验证训练营页面自动识别
1. 导航到 `/wealth-camp-intro`
2. 验证：
   - 页面底部不再显示 ¥299 购买按钮
   - 而是显示「开始训练营」按钮（因为步骤 1 已同时开通训练营权益）

### 测试 3：验证后端数据
- 检查 `partners` 表是否创建了合伙人记录
- 检查 `orders` 表是否有 ¥0 的测评订单
- 检查 `user_camp_purchases` 表是否有训练营记录
- 检查邀请码状态是否变为 `claimed`

### 测试 4：清理测试数据
- 删除测试产生的 partner、order、camp_purchase 记录
- 删除或重置测试邀请码

## 技术要点

| 步骤 | 工具 |
|------|------|
| 插入测试邀请码 | 数据库迁移 |
| UI 交互测试 | 浏览器工具 |
| 数据验证 | 数据库查询 |
| 清理 | 数据库迁移 |

