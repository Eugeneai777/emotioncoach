

# æµ‹è¯„å AI æ•™ç»ƒé¦–è½®å¯¹è¯è„šæœ¬å®ç°æ–¹æ¡ˆ

## ä¸€ã€éœ€æ±‚åˆ†æ

ç”¨æˆ·å¸Œæœ›åˆ›å»ºä¸€å¥—å®Œæ•´çš„**æµ‹è¯„å AI æ•™ç»ƒå¯¹è¯è„šæœ¬ç³»ç»Ÿ**ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

| éœ€æ±‚é¡¹ | è¯´æ˜ |
|--------|------|
| **4ç§æ¨¡å¼è„šæœ¬** | èƒ½é‡è€—ç«­å‹ã€é«˜åº¦ç´§ç»·å‹ã€æƒ…ç»ªå‹æŠ‘å‹ã€é€ƒé¿å»¶è¿Ÿå‹ |
| **5-7è½®ç»“æ„** | å…±æƒ…â†’è§‰å¯Ÿâ†’èšç„¦â†’å¾®è¡ŒåŠ¨â†’æŒç»­é™ªä¼´â†’è½¬è®­ç»ƒè¥ |
| **ç»Ÿä¸€æµç¨‹** | Round 6-7 ä¸ºé€šç”¨è½¬åŒ–è½®æ¬¡ |
| **åº”ç”¨åœºæ™¯** | å°ç¨‹åºè‡ªåŠ¨å¯¹è¯ / è®­ç»ƒè¥å…¥å£ / å®¢æœç¼“å†²å±‚ |
| **è½¬åŒ–ç›®æ ‡** | æœ€ç»ˆå¯¼å…¥ Â¥299 æƒ…ç»ªæ—¥è®°è®­ç»ƒè¥ |

---

## äºŒã€å½“å‰ç³»ç»Ÿæ¶æ„

å½“å‰ç³»ç»Ÿå·²æœ‰çš„ç»“æ„ï¼š

```text
ç”¨æˆ·å®Œæˆæµ‹è¯„
     â†“
ç‚¹å‡»ã€Œå¼€å§‹æˆ‘çš„AIé™ªä¼´å¯¹è¯ã€
     â†“
navigate('/coach-space', { state: { pattern: 'exhaustion' } })
     â†“
DynamicCoach.tsx æ¥æ”¶ pattern
     â†“
è°ƒç”¨ emotion-coach Edge Function
     â†“
Edge Function ä»æ•°æ®åº“è¯»å– stage_prompts æ„å»ºå¯¹è¯
```

**å…³é”®å‘ç°**ï¼š
- `emotion-coach` Edge Function å·²æ”¯æŒä»æ•°æ®åº“è¯»å– `stage_prompts`
- ä½†å½“å‰ `aiOpening` å­—æ®µåªæœ‰å•è½®å¼€åœºç™½
- ç¼ºå°‘å®Œæ•´çš„ 5-7 è½®è„šæœ¬ç»“æ„

---

## ä¸‰ã€æ•°æ®å±‚å¢å¼º

### 3.1 æ–°å¢ AI æ•™ç»ƒå¯¹è¯è„šæœ¬é…ç½®

åœ¨ `emotionHealthData.ts` ä¸­æ–°å¢å®Œæ•´çš„è„šæœ¬ç»“æ„ï¼š

```typescript
// AIæ•™ç»ƒé¦–è½®å¯¹è¯è„šæœ¬ï¼ˆ4å‹ Ã— 5-7è½®ï¼‰
export const coachDialogueScripts: Record<PatternType, {
  patternName: string;
  ctaButton: string;
  ctaLabel: string;
  rounds: Array<{
    round: number;
    phase: string;       // å…±æƒ…/è§‰å¯Ÿ/èšç„¦/å¾®è¡ŒåŠ¨/æŒç»­é™ªä¼´
    content: string;     // å¯¹è¯å†…å®¹
    waitForUser: boolean; // æ˜¯å¦éœ€è¦ç­‰å¾…ç”¨æˆ·å›å¤
    options?: string[];  // å¯é€‰çš„å¼•å¯¼é€‰é¡¹
  }>;
}> = {
  exhaustion: {
    patternName: 'èƒ½é‡è€—ç«­å‹',
    ctaButton: 'å¼€å§‹æƒ…ç»ªä¿®å¤é™ªä¼´',
    ctaLabel: 'æƒ…ç»ªä¿®å¤AI + èƒ½é‡æ¢å¤è¥',
    rounds: [
      {
        round: 1,
        phase: 'å…±æƒ…å¼€åœº',
        content: 'æˆ‘çœ‹åˆ°ä½ çš„ç»“æœæ˜¾ç¤ºä½ ç°åœ¨å¤„åœ¨æ¯”è¾ƒæ˜æ˜¾çš„"èƒ½é‡é€æ”¯"çŠ¶æ€ã€‚\nè¿™é€šå¸¸ä¸æ˜¯å› ä¸ºä½ ä¸åŠªåŠ›ï¼Œè€Œæ˜¯å› ä¸ºä½ å·²ç»æ’‘äº†å¾ˆä¹…ã€‚\nåœ¨ç»§ç»­å¾€å‰ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆç¡®è®¤ä¸€ä»¶äº‹ï¼š\næœ€è¿‘è®©ä½ æœ€ç´¯çš„ï¼Œæ˜¯å“ªä¸€ä»¶äº‹æˆ–å“ªä¸€ç§è§’è‰²ï¼Ÿ',
        waitForUser: true
      },
      {
        round: 2,
        phase: 'å¼•å¯¼è§‰å¯Ÿ',
        content: 'å½“ä½ æƒ³åˆ°è¿™ä»¶äº‹æ—¶ï¼Œèº«ä½“æ›´æ˜æ˜¾çš„æ„Ÿå—æ˜¯ä»€ä¹ˆï¼Ÿ\næ¯”å¦‚ï¼šç–²æƒ«ã€ç´§ç»·ã€å¿ƒçƒ¦ï¼Œè¿˜æ˜¯æ— åŠ›ï¼Ÿ',
        waitForUser: true,
        options: ['ç–²æƒ«', 'ç´§ç»·', 'å¿ƒçƒ¦', 'æ— åŠ›', 'è¯´ä¸æ¸…']
      },
      {
        round: 3,
        phase: 'æ­£å¸¸åŒ–ä½“éªŒ',
        content: 'ä½ ç°åœ¨çš„ååº”å…¶å®å¾ˆåˆç†ã€‚\nå½“ä¸€ä¸ªäººé•¿æœŸå¤„åœ¨"è´£ä»»ä¼˜å…ˆ"çš„çŠ¶æ€ï¼Œå¤§è„‘ä¼šè‡ªåŠ¨è¿›å…¥èŠ‚èƒ½æ¨¡å¼ã€‚\nè¿™ä¸æ˜¯æ‡’ï¼Œè€Œæ˜¯ç³»ç»Ÿåœ¨è‡ªæˆ‘ä¿æŠ¤ã€‚',
        waitForUser: false
      },
      {
        round: 4,
        phase: 'è½»é‡ä¿®å¤è¡ŒåŠ¨',
        content: 'æˆ‘ä»¬å…ˆä¸è°ˆæ”¹å˜ï¼Œåªåšä¸€ä¸ªå¾ˆå°çš„æ¢å¤åŠ¨ä½œã€‚\næ¥ä¸‹æ¥2åˆ†é’Ÿï¼Œä½ åªéœ€è¦åšä¸€ä»¶äº‹ï¼š\næŠŠæ³¨æ„åŠ›æ”¾åœ¨å‘¼å¸ä¸Šï¼Œæ…¢æ…¢æ•°10æ¬¡ã€‚\nåšå®Œå‘Šè¯‰æˆ‘ï¼Œä½ ç°åœ¨çš„çŠ¶æ€æœ‰æ²¡æœ‰å“ªæ€•ä¸€ç‚¹ç‚¹å˜åŒ–ã€‚',
        waitForUser: true
      },
      {
        round: 5,
        phase: 'è¿æ¥é•¿æœŸè·¯å¾„',
        content: 'å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¥ä¸‹æ¥å‡ å¤©é‡Œï¼Œ\nä¸€èµ·å¸®ä½ æ…¢æ…¢æ‰¾å›èƒ½é‡ï¼Œè€Œä¸æ˜¯ç»§ç»­ç¡¬æ’‘ã€‚\næˆ‘ä¼šæ¯å¤©ç»™ä½ ä¸€ä¸ªä¸è´¹åŠ›çš„å°ç»ƒä¹ ï¼Œ\nè®©æ¢å¤å˜æˆå¯æ‰§è¡Œçš„äº‹ã€‚\n\nä½ æƒ³ç°åœ¨å¼€å§‹è¿™ä¸ªé™ªä¼´å—ï¼Ÿ',
        waitForUser: true
      }
    ]
  },
  tension: { ... },  // é«˜åº¦ç´§ç»·å‹è„šæœ¬
  suppression: { ... },  // æƒ…ç»ªå‹æŠ‘å‹è„šæœ¬
  avoidance: { ... }  // é€ƒé¿å»¶è¿Ÿå‹è„šæœ¬
};

// é€šç”¨ç¬¬6-7è½®ï¼ˆè½¬è®­ç»ƒè¥ï¼‰
export const universalConversionRounds = [
  {
    round: 6,
    phase: 'æ‰¿è®¤æ”¹å˜éœ€è¦æ—¶é—´',
    content: 'æƒ…ç»ªå’Œä¹ æƒ¯ä¸æ˜¯ä¸€å¤©å½¢æˆçš„ï¼Œä¹Ÿä¸ä¼šä¸€å¤©æ”¹å˜ã€‚\næœ‰ç³»ç»Ÿçš„é™ªä¼´ï¼Œä¼šæ¯”ä½ ä¸€ä¸ªäººç¡¬æ‰›è½»æ¾å¾ˆå¤šã€‚',
    waitForUser: false
  },
  {
    round: 7,
    phase: 'è½¬å…¥ç³»ç»Ÿæ”¯æŒ',
    content: 'æ¥ä¸‹æ¥æˆ‘å¯ä»¥æŠŠä½ æ¥å…¥ä¸€ä¸ªæ›´ç³»ç»Ÿçš„é™ªä¼´è·¯å¾„ï¼Œ\nåŒ…æ‹¬æ¯å¤©çš„å¼•å¯¼ç»ƒä¹ å’Œé˜¶æ®µæ€§å›é¡¾ã€‚\n\nä½ æƒ³ç»§ç»­è·Ÿæˆ‘ä¸€èµ·èµ°ä¸‹å»å—ï¼Ÿ',
    waitForUser: true,
    cta: {
      primary: 'è¿›å…¥21å¤©æƒ…ç»ªä¿®å¤è®­ç»ƒè¥',
      secondary: 'å‡çº§365é™ªä¼´'
    }
  }
];
```

### 3.2 å››å¤§æ¨¡å¼å®Œæ•´è„šæœ¬å†…å®¹

æŒ‰ç…§ç”¨æˆ·æä¾›çš„æ–‡æ¡ˆï¼Œä¸ºæ¯ç§æ¨¡å¼åˆ›å»ºå®Œæ•´çš„5è½®è„šæœ¬ï¼š

| æ¨¡å¼ | Round 1 | Round 2 | Round 3 | Round 4 | Round 5 |
|------|---------|---------|---------|---------|---------|
| èƒ½é‡è€—ç«­å‹ | å…±æƒ…å¼€åœº | å¼•å¯¼è§‰å¯Ÿ | æ­£å¸¸åŒ–ä½“éªŒ | è½»é‡ä¿®å¤ | è¿æ¥é•¿æœŸè·¯å¾„ |
| é«˜åº¦ç´§ç»·å‹ | å…±æƒ…å¼€åœº | è¯†åˆ«æ‹…å¿§æºå¤´ | æŒ‡å‡ºæœºåˆ¶ | æ¾åŠ¨æ§åˆ¶ç»ƒä¹  | è¿æ¥é•¿æœŸè·¯å¾„ |
| æƒ…ç»ªå‹æŠ‘å‹ | å…±æƒ…å¼€åœº | å‘½åæƒ…ç»ª | å®‰å…¨æ„Ÿå»ºç«‹ | è¡¨è¾¾ç»ƒä¹  | è¿æ¥é•¿æœŸè·¯å¾„ |
| é€ƒé¿å»¶è¿Ÿå‹ | å…±æƒ…å¼€åœº | æ‹†è§£ææƒ§ | æœºåˆ¶è§£é‡Š | å¾®å¯åŠ¨è¡ŒåŠ¨ | è¿æ¥é•¿æœŸè·¯å¾„ |

---

## å››ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### æ–¹æ¡ˆé€‰æ‹©ï¼šEdge Function + æ•°æ®é…ç½®

è€ƒè™‘åˆ°ç°æœ‰æ¶æ„ï¼Œæ¨è **å‰ç«¯é…ç½® + Edge Function ååŒ** æ–¹æ¡ˆï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. å‰ç«¯ emotionHealthData.ts          â”‚
â”‚     å­˜å‚¨å®Œæ•´è„šæœ¬é…ç½®                     â”‚
â”‚     ç”¨äºä»‹ç»é¡µå±•ç¤º + å¯¹è¯ UI            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æ–°å¢ AssessmentCoachChat ç»„ä»¶       â”‚
â”‚     ä¸“é—¨ç”¨äºæµ‹è¯„åçš„è„šæœ¬å¼å¯¹è¯           â”‚
â”‚     æ”¯æŒè½®æ¬¡æ¨è¿› + é€‰é¡¹ç‚¹å‡»              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. emotion-coach Edge Function         â”‚
â”‚     æ ¹æ® pattern å‚æ•°é€‰æ‹©å¯¹åº”è„šæœ¬        â”‚
â”‚     åœ¨ Round 5 ååˆ‡æ¢åˆ°é€šç”¨è½¬åŒ–è½®æ¬¡      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.1 æ•°æ®å±‚æ–‡ä»¶æ›´æ–°

**æ–‡ä»¶**: `src/components/emotion-health/emotionHealthData.ts`

æ–°å¢å†…å®¹ï¼š
- `coachDialogueScripts` - å››å¤§æ¨¡å¼çš„5è½®è„šæœ¬
- `universalConversionRounds` - é€šç”¨6-7è½®è½¬åŒ–è„šæœ¬
- æ¯è½®è„šæœ¬åŒ…å«ï¼š`round`ã€`phase`ã€`content`ã€`waitForUser`ã€`options`

### 4.2 æ–°å¢ç»„ä»¶ï¼šAssessmentCoachChat

**æ–‡ä»¶**: `src/components/emotion-health/AssessmentCoachChat.tsx`

ä¸“é—¨ç”¨äºæµ‹è¯„åçš„è„šæœ¬å¼å¯¹è¯ç»„ä»¶ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AssessmentCoachChat                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Props:                                 â”‚
â”‚  - pattern: PatternType                 â”‚
â”‚  - onComplete: (action: string) => void â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State:                                 â”‚
â”‚  - currentRound: number                 â”‚
â”‚  - messages: Message[]                  â”‚
â”‚  - isWaiting: boolean                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Features:                              â”‚
â”‚  - è‡ªåŠ¨æ’­æ”¾è„šæœ¬å¯¹è¯                      â”‚
â”‚  - æ”¯æŒç”¨æˆ·è¾“å…¥æˆ–é€‰é¡¹ç‚¹å‡»                â”‚
â”‚  - Round 5 æ˜¾ç¤º CTA æŒ‰é’®                â”‚
â”‚  - Round 6-7 è¿ç»­å¯¹è¯è½¬åŒ–                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ç»“æœé¡µé›†æˆ

**æ–‡ä»¶**: `src/components/emotion-health/EmotionHealthResult.tsx`

æ›´æ–° `handleStartCoach` å‡½æ•°ï¼Œæºå¸¦ pattern ä¿¡æ¯ï¼š

```typescript
const handleStartCoach = () => {
  navigate('/assessment-coach', { 
    state: { 
      pattern: result.primaryPattern,
      blockedDimension: result.blockedDimension,
      fromAssessment: 'emotion_health'
    } 
  });
};
```

### 4.4 æ–°å¢è·¯ç”±é¡µé¢

**æ–‡ä»¶**: `src/pages/AssessmentCoachPage.tsx`

æµ‹è¯„åä¸“ç”¨çš„æ•™ç»ƒå¯¹è¯é¡µé¢ï¼š

```typescript
export default function AssessmentCoachPage() {
  const location = useLocation();
  const { pattern, blockedDimension } = location.state || {};
  
  return (
    <div className="h-screen flex flex-col">
      <PageHeader title="AIé™ªä¼´å¯¹è¯" />
      <AssessmentCoachChat 
        pattern={pattern || 'exhaustion'} 
        blockedDimension={blockedDimension}
        onComplete={(action) => {
          if (action === 'camp') {
            navigate('/camps/emotion');
          }
        }}
      />
    </div>
  );
}
```

---

## äº”ã€UI è®¾è®¡è§„èŒƒ

### 5.1 å¯¹è¯ç•Œé¢å¸ƒå±€

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [AIå¤´åƒ] åŠ²è€å¸ˆ ğŸŒ¿                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æˆ‘çœ‹åˆ°ä½ çš„ç»“æœæ˜¾ç¤º...           â”‚   â”‚
â”‚  â”‚ æœ€è¿‘è®©ä½ æœ€ç´¯çš„ï¼Œæ˜¯å“ªä¸€ä»¶äº‹ï¼Ÿ     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ç–²æƒ«] [ç´§ç»·] [å¿ƒçƒ¦] [æ— åŠ›]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [è¾“å…¥æ¡†]                    [å‘é€]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 CTA æŒ‰é’®åŒºï¼ˆRound 5 åæ˜¾ç¤ºï¼‰

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ä½ æƒ³ç°åœ¨å¼€å§‹è¿™ä¸ªé™ªä¼´å—ï¼Ÿ               â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸŸ  å¼€å§‹æƒ…ç»ªä¿®å¤é™ªä¼´              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  æˆ–è€…ç»§ç»­èŠèŠ â†’                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 è½¬åŒ–åŒºï¼ˆRound 7ï¼‰

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ä½ æƒ³ç»§ç»­è·Ÿæˆ‘ä¸€èµ·èµ°ä¸‹å»å—ï¼Ÿ              â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è¿›å…¥21å¤©æƒ…ç»ªä¿®å¤è®­ç»ƒè¥           â”‚   â”‚
â”‚  â”‚  Â¥299                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å‡çº§365é™ªä¼´ â†’                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€å®æ–½æ­¥éª¤

| æ­¥éª¤ | å†…å®¹ | æ–‡ä»¶ |
|------|------|------|
| 1 | æ·»åŠ  `coachDialogueScripts` å®Œæ•´è„šæœ¬é…ç½® | emotionHealthData.ts |
| 2 | æ·»åŠ  `universalConversionRounds` é€šç”¨è½¬åŒ–è½®æ¬¡ | emotionHealthData.ts |
| 3 | åˆ›å»º `AssessmentCoachChat` è„šæœ¬å¯¹è¯ç»„ä»¶ | AssessmentCoachChat.tsx |
| 4 | åˆ›å»º `AssessmentCoachPage` é¡µé¢ | AssessmentCoachPage.tsx |
| 5 | æ›´æ–°è·¯ç”±é…ç½®æ·»åŠ æ–°é¡µé¢ | App.tsx |
| 6 | æ›´æ–°ç»“æœé¡µå¯¼èˆªé€»è¾‘ | EmotionHealthResult.tsx |
| 7 | æ›´æ–° `index.ts` å¯¼å‡ºæ–°é…ç½® | index.ts |

---

## ä¸ƒã€è„šæœ¬å†…å®¹è¯¦æƒ…

### èƒ½é‡è€—ç«­å‹å®Œæ•´è„šæœ¬

| è½®æ¬¡ | é˜¶æ®µ | å†…å®¹ |
|------|------|------|
| R1 | å…±æƒ…å¼€åœº | æˆ‘çœ‹åˆ°ä½ çš„ç»“æœæ˜¾ç¤ºä½ ç°åœ¨å¤„åœ¨æ¯”è¾ƒæ˜æ˜¾çš„"èƒ½é‡é€æ”¯"çŠ¶æ€ã€‚è¿™é€šå¸¸ä¸æ˜¯å› ä¸ºä½ ä¸åŠªåŠ›ï¼Œè€Œæ˜¯å› ä¸ºä½ å·²ç»æ’‘äº†å¾ˆä¹…ã€‚åœ¨ç»§ç»­å¾€å‰ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆç¡®è®¤ä¸€ä»¶äº‹ï¼šæœ€è¿‘è®©ä½ æœ€ç´¯çš„ï¼Œæ˜¯å“ªä¸€ä»¶äº‹æˆ–å“ªä¸€ç§è§’è‰²ï¼Ÿ |
| R2 | å¼•å¯¼è§‰å¯Ÿ | å½“ä½ æƒ³åˆ°è¿™ä»¶äº‹æ—¶ï¼Œèº«ä½“æ›´æ˜æ˜¾çš„æ„Ÿå—æ˜¯ä»€ä¹ˆï¼Ÿæ¯”å¦‚ï¼šç–²æƒ«ã€ç´§ç»·ã€å¿ƒçƒ¦ï¼Œè¿˜æ˜¯æ— åŠ›ï¼Ÿ |
| R3 | æ­£å¸¸åŒ– | ä½ ç°åœ¨çš„ååº”å…¶å®å¾ˆåˆç†ã€‚å½“ä¸€ä¸ªäººé•¿æœŸå¤„åœ¨"è´£ä»»ä¼˜å…ˆ"çš„çŠ¶æ€ï¼Œå¤§è„‘ä¼šè‡ªåŠ¨è¿›å…¥èŠ‚èƒ½æ¨¡å¼ã€‚è¿™ä¸æ˜¯æ‡’ï¼Œè€Œæ˜¯ç³»ç»Ÿåœ¨è‡ªæˆ‘ä¿æŠ¤ã€‚ |
| R4 | å¾®è¡ŒåŠ¨ | æˆ‘ä»¬å…ˆä¸è°ˆæ”¹å˜ï¼Œåªåšä¸€ä¸ªå¾ˆå°çš„æ¢å¤åŠ¨ä½œã€‚æ¥ä¸‹æ¥2åˆ†é’Ÿï¼Œä½ åªéœ€è¦åšä¸€ä»¶äº‹ï¼šæŠŠæ³¨æ„åŠ›æ”¾åœ¨å‘¼å¸ä¸Šï¼Œæ…¢æ…¢æ•°10æ¬¡ã€‚åšå®Œå‘Šè¯‰æˆ‘ï¼Œä½ ç°åœ¨çš„çŠ¶æ€æœ‰æ²¡æœ‰å“ªæ€•ä¸€ç‚¹ç‚¹å˜åŒ–ã€‚ |
| R5 | é•¿æœŸè·¯å¾„ | å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¥ä¸‹æ¥å‡ å¤©é‡Œï¼Œä¸€èµ·å¸®ä½ æ…¢æ…¢æ‰¾å›èƒ½é‡ï¼Œè€Œä¸æ˜¯ç»§ç»­ç¡¬æ’‘ã€‚æˆ‘ä¼šæ¯å¤©ç»™ä½ ä¸€ä¸ªä¸è´¹åŠ›çš„å°ç»ƒä¹ ï¼Œè®©æ¢å¤å˜æˆå¯æ‰§è¡Œçš„äº‹ã€‚ä½ æƒ³ç°åœ¨å¼€å§‹è¿™ä¸ªé™ªä¼´å—ï¼Ÿ |

### é«˜åº¦ç´§ç»·å‹å®Œæ•´è„šæœ¬

| è½®æ¬¡ | é˜¶æ®µ | å†…å®¹ |
|------|------|------|
| R1 | å…±æƒ…å¼€åœº | ä½ çš„æµ‹è¯„æ˜¾ç¤ºï¼Œä½ ç°åœ¨å¾ˆå¯èƒ½ä¸€ç›´å¤„åœ¨"å¿…é¡»æ’‘ä½"çš„çŠ¶æ€ã€‚å¾ˆå¤šäººä¼šä»¥ä¸ºè¿™æ˜¯è´£ä»»æ„Ÿå¼ºï¼Œå…¶å®è¿™å¯¹å¤§è„‘æ˜¯æå¤§çš„è´Ÿæ‹…ã€‚æœ€è¿‘æœ‰æ²¡æœ‰ä¸€ä»¶äº‹ï¼Œè®©ä½ ç‰¹åˆ«ä¸æ•¢å‡ºé”™ï¼Ÿ |
| R2 | è¯†åˆ«æ‹…å¿§ | å½“ä½ æƒ³åˆ°è¿™ä»¶äº‹æ—¶ï¼Œè„‘å­é‡Œæœ€å¸¸å‡ºç°çš„æ‹…å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ€•å¤±è´¥ï¼Ÿæ€•è¢«å¦å®šï¼Ÿè¿˜æ˜¯æ€•å½±å“åˆ«äººï¼Ÿ |
| R3 | æŒ‡å‡ºæœºåˆ¶ | é•¿æœŸç´§ç»·æ—¶ï¼Œå¤§è„‘ä¼šæŠŠå¾ˆå¤šæ™®é€šæƒ…å†µéƒ½å½“æˆå¨èƒï¼Œäºæ˜¯ä½ ä¼šæœ¬èƒ½åœ°æƒ³æå‰æ§åˆ¶ä¸€åˆ‡ã€‚é—®é¢˜æ˜¯ï¼Œè¿™æ ·ä¼šè®©ä½ ä¸€ç›´åœåœ¨é«˜å‹çŠ¶æ€ã€‚ |
| R4 | æ¾åŠ¨ç»ƒä¹  | æˆ‘ä»¬å¯ä»¥å…ˆè¯•ä¸€ä¸ªå°å°çš„"æ”¾æ¾å®éªŒ"ã€‚ä»Šå¤©é€‰ä¸€ä»¶ä¸é‚£ä¹ˆé‡è¦çš„å°äº‹ï¼Œå…è®¸å®ƒåªåšåˆ°70åˆ†ï¼Œè€Œä¸æ˜¯å®Œç¾ã€‚åšå®Œåå‘Šè¯‰æˆ‘ï¼Œä½ çš„ç„¦è™‘æœ‰æ²¡æœ‰å˜åŒ–ã€‚ |
| R5 | é•¿æœŸè·¯å¾„ | æ¥ä¸‹æ¥æˆ‘å¯ä»¥æ¯å¤©é™ªä½ åšä¸€äº›é™ä½å¤§è„‘è­¦æˆ’çŠ¶æ€çš„å°ç»ƒä¹ ï¼Œå¸®ä½ æ…¢æ…¢æ‰¾å›å®‰å…¨æ„Ÿï¼Œè€Œä¸æ˜¯é æ§åˆ¶ç¡¬æ’‘ã€‚ä½ æƒ³è®©æˆ‘è¿™æ ·é™ªä½ å‡ å¤©è¯•è¯•çœ‹å—ï¼Ÿ |

### æƒ…ç»ªå‹æŠ‘å‹å®Œæ•´è„šæœ¬

| è½®æ¬¡ | é˜¶æ®µ | å†…å®¹ |
|------|------|------|
| R1 | å…±æƒ…å¼€åœº | ä»ä½ çš„ç»“æœæ¥çœ‹ï¼Œä½ å¾ˆä¹ æƒ¯æŠŠæƒ…ç»ªç•™ç»™è‡ªå·±æ¶ˆåŒ–ã€‚ä½ å¯èƒ½ä¸æƒ³ç»™åˆ«äººæ·»éº»çƒ¦ï¼Œä½†è¿™å…¶å®ä¼šè®©ä½ å¾ˆè¾›è‹¦ã€‚æœ€è¿‘æœ‰æ²¡æœ‰ä¸€ä»¶äº‹ï¼Œè®©ä½ å…¶å®æŒºå§”å±ˆï¼Œå´æ²¡è¯´å‡ºå£ï¼Ÿ |
| R2 | å‘½åæƒ…ç»ª | å¦‚æœè¦ç»™é‚£ç§æ„Ÿè§‰ä¸€ä¸ªåå­—ï¼Œä½ è§‰å¾—æ›´åƒæ˜¯ï¼šå¤±æœ›ã€éš¾è¿‡ã€æ„¤æ€’ï¼Œè¿˜æ˜¯è¢«å¿½è§†ï¼Ÿ |
| R3 | å®‰å…¨æ„Ÿå»ºç«‹ | æƒ…ç»ªè¢«è¯´å‡ºæ¥ï¼Œå¹¶ä¸ä¼šè®©ä½ å˜æˆéº»çƒ¦çš„äººã€‚å®ƒåªæ˜¯å‘Šè¯‰ä½ ï¼šä½ ä¹Ÿæœ‰éœ€è¦è¢«çœ‹è§çš„éƒ¨åˆ†ã€‚ä½ æ„¿æ„è®©æˆ‘å…ˆå¬ä½ è¯´è¯´è¿™ä»¶äº‹å—ï¼Ÿ |
| R4 | è¡¨è¾¾ç»ƒä¹  | æˆ‘ä»¬å¯ä»¥è¯•ä¸€ä¸ªå®‰å…¨çš„è¡¨è¾¾æ–¹å¼ã€‚ç”¨è¿™å¥è¯è¡¥å…¨ï¼š"å½“___å‘ç”Ÿæ—¶ï¼Œæˆ‘å…¶å®å¾ˆ___ã€‚"ä½ å¯ä»¥å…ˆåªå¯¹æˆ‘è¯´ã€‚ |
| R5 | é•¿æœŸè·¯å¾„ | å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥é™ªä½ ç»ƒä¹ å¦‚ä½•è¡¨è¾¾çœŸå®éœ€è¦è€Œä¸ä¼¤å®³å…³ç³»ã€‚è¿™ä¸æ˜¯ä¸€è¹´è€Œå°±çš„äº‹ï¼Œä½†å¯ä»¥æ…¢æ…¢å˜å¾—å®¹æ˜“ã€‚ä½ æƒ³å¼€å§‹è¿™ä¸ªç»ƒä¹ å—ï¼Ÿ |

### é€ƒé¿å»¶è¿Ÿå‹å®Œæ•´è„šæœ¬

| è½®æ¬¡ | é˜¶æ®µ | å†…å®¹ |
|------|------|------|
| R1 | å…±æƒ…å¼€åœº | ä½ çš„ç»“æœæ˜¾ç¤ºï¼Œä½ å¹¶ä¸æ˜¯ä¸æƒ³è¡ŒåŠ¨ï¼Œè€Œæ˜¯æ¯æ¬¡ä¸€æƒ³åˆ°è¦å¼€å§‹ï¼Œæƒ…ç»ªå°±å…ˆå¡ä½ä½ ã€‚æœ€è¿‘æœ‰æ²¡æœ‰ä¸€ä»¶ä½ ä¸€ç›´æ‹–ç€å´åˆå¾ˆåœ¨æ„çš„äº‹ï¼Ÿ |
| R2 | æ‹†è§£ææƒ§ | å½“ä½ æƒ³åˆ°è¦åšè¿™ä»¶äº‹æ—¶ï¼Œæœ€å¼ºçƒˆçš„æ„Ÿå—æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å‹åŠ›ã€å®³æ€•å¤±è´¥ï¼Œè¿˜æ˜¯ä¸çŸ¥é“ä»å“ªå¼€å§‹ï¼Ÿ |
| R3 | æœºåˆ¶è§£é‡Š | æ‹–å»¶å¾ˆå¤šæ—¶å€™ä¸æ˜¯æ„å¿—åŠ›é—®é¢˜ï¼Œè€Œæ˜¯å¤§è„‘æŠŠ"å¼€å§‹"è¯¯åˆ¤æˆå±é™©ä¿¡å·ã€‚æ‰€ä»¥å®ƒä¼šè®©ä½ å…ˆå»åšæ›´è½»æ¾çš„äº‹æ¥ä¿æŠ¤ä½ ã€‚ |
| R4 | å¾®å¯åŠ¨ | æˆ‘ä»¬ä¸éœ€è¦ä¸€ä¸‹å­è§£å†³æ•´ä»¶äº‹ã€‚ç°åœ¨åªé€‰ä¸€ä¸ª5åˆ†é’Ÿå†…èƒ½å®Œæˆçš„æœ€å°æ­¥éª¤ã€‚æ¯”å¦‚ï¼šæ‰“å¼€æ–‡ä»¶ã€å†™ä¸€å¥è¯ã€å‘ä¸€æ¡ä¿¡æ¯ã€‚ä½ æ„¿æ„ç°åœ¨è¯•ä¸€ä¸ªå—ï¼Ÿ |
| R5 | é•¿æœŸè·¯å¾„ | å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥æ¯å¤©é™ªä½ åšä¸€ä¸ªå¾ˆå°ä½†å¯å®Œæˆçš„è¡ŒåŠ¨ï¼Œå¸®å¤§è„‘é‡æ–°å»ºç«‹"æˆ‘å¯ä»¥å¼€å§‹"çš„ä¿¡å·ã€‚è¦ä¸è¦ä»ä»Šå¤©å°±å¼€å§‹ï¼Ÿ |

### é€šç”¨è½¬åŒ–è½®æ¬¡ï¼ˆRound 6-7ï¼‰

| è½®æ¬¡ | é˜¶æ®µ | å†…å®¹ |
|------|------|------|
| R6 | æ‰¿è®¤æ”¹å˜éœ€è¦æ—¶é—´ | æƒ…ç»ªå’Œä¹ æƒ¯ä¸æ˜¯ä¸€å¤©å½¢æˆçš„ï¼Œä¹Ÿä¸ä¼šä¸€å¤©æ”¹å˜ã€‚æœ‰ç³»ç»Ÿçš„é™ªä¼´ï¼Œä¼šæ¯”ä½ ä¸€ä¸ªäººç¡¬æ‰›è½»æ¾å¾ˆå¤šã€‚ |
| R7 | è½¬å…¥ç³»ç»Ÿæ”¯æŒ | æ¥ä¸‹æ¥æˆ‘å¯ä»¥æŠŠä½ æ¥å…¥ä¸€ä¸ªæ›´ç³»ç»Ÿçš„é™ªä¼´è·¯å¾„ï¼ŒåŒ…æ‹¬æ¯å¤©çš„å¼•å¯¼ç»ƒä¹ å’Œé˜¶æ®µæ€§å›é¡¾ã€‚ä½ æƒ³ç»§ç»­è·Ÿæˆ‘ä¸€èµ·èµ°ä¸‹å»å—ï¼Ÿ |

---

## å…«ã€æŠ€æœ¯ç»†èŠ‚

### å¯¹è¯æµç¨‹æ§åˆ¶é€»è¾‘

```typescript
// å¯¹è¯çŠ¶æ€æœº
type DialogueState = 'waiting_user' | 'ai_speaking' | 'show_cta' | 'completed';

interface DialogueController {
  currentRound: number;
  state: DialogueState;
  
  // æ¨è¿›åˆ°ä¸‹ä¸€è½®
  advanceRound: () => void;
  
  // å¤„ç†ç”¨æˆ·è¾“å…¥
  handleUserInput: (input: string) => void;
  
  // å¤„ç†é€‰é¡¹ç‚¹å‡»
  handleOptionClick: (option: string) => void;
  
  // æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºCTA
  shouldShowCTA: () => boolean;
}
```

### CTA æŒ‰é’®é…ç½®

```typescript
const ctaButtonConfig: Record<PatternType, {
  label: string;
  campId: string;
  coachType: string;
}> = {
  exhaustion: {
    label: 'å¼€å§‹æƒ…ç»ªä¿®å¤é™ªä¼´',
    campId: 'emotion_journal_21',
    coachType: 'emotion_recovery'
  },
  tension: {
    label: 'å¼€å§‹ç„¦è™‘é‡Šæ”¾é™ªä¼´',
    campId: 'emotion_journal_21',
    coachType: 'anxiety_release'
  },
  suppression: {
    label: 'å¼€å§‹æƒ…ç»ªè¡¨è¾¾é™ªä¼´',
    campId: 'emotion_journal_21',
    coachType: 'emotion_expression'
  },
  avoidance: {
    label: 'å¼€å§‹è¡ŒåŠ¨å¯åŠ¨é™ªä¼´',
    campId: 'emotion_journal_21',
    coachType: 'action_coach'
  }
};
```

---

## ä¹ã€é¢„æœŸæ•ˆæœ

1. **ç”¨æˆ·å®Œæˆæµ‹è¯„å** â†’ ç‚¹å‡»CTAè¿›å…¥ä¸“å±å¯¹è¯é¡µé¢
2. **AIè‡ªåŠ¨å¼€å§‹Round 1** â†’ å…±æƒ…å¼€åœºï¼Œç­‰å¾…ç”¨æˆ·å›å¤
3. **ç”¨æˆ·å›å¤å** â†’ AIæ¨è¿›åˆ°Round 2ï¼Œé€è½®è¿›è¡Œ
4. **Round 5 ç»“æŸ** â†’ æ˜¾ç¤ºä¸“å±CTAæŒ‰é’®ï¼ˆå¼€å§‹XXé™ªä¼´ï¼‰
5. **ç”¨æˆ·ç»§ç»­å¯¹è¯** â†’ è¿›å…¥Round 6-7ï¼Œå¼ºè½¬åŒ–
6. **ç‚¹å‡»CTA** â†’ å¯¼èˆªåˆ°æƒ…ç»ªæ—¥è®°è®­ç»ƒè¥è´­ä¹°é¡µï¼ˆÂ¥299ï¼‰

