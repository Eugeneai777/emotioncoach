

## åˆ†äº«æŒ‰é’®ä¸ç»Ÿä¸€åˆ†äº«æ¨¡å—å®¡è®¡æ–¹æ¡ˆ

### å½“å‰é¡¹ç›®åˆ†äº«ä½“ç³»æ¦‚è§ˆ

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç»Ÿä¸€åˆ†äº«æ¨¡å—æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é…ç½®å±‚                                                          â”‚
â”‚  â”œâ”€â”€ shareCardsRegistry.ts      â†’ 26+ å¡ç‰‡ç»Ÿä¸€æ³¨å†Œè¡¨            â”‚
â”‚  â”œâ”€â”€ introShareConfig.ts        â†’ 17 ä¸ªä»‹ç»é¡µåˆ†äº«é…ç½®            â”‚
â”‚  â””â”€â”€ partnerShareCardStyles.ts  â†’ åˆä¼™äººå¡ç‰‡å¤šæ¨¡æ¿é…ç½®           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»„ä»¶å±‚                                                          â”‚
â”‚  â”œâ”€â”€ ShareCardBase.tsx          â†’ å¡ç‰‡åŸºç¡€ç»„ä»¶ (QR/å“ç‰Œ/Footer)  â”‚
â”‚  â”œâ”€â”€ IntroShareCard.tsx         â†’ ä»‹ç»é¡µåˆ†äº«å¡                   â”‚
â”‚  â”œâ”€â”€ IntroShareDialog.tsx       â†’ ä»‹ç»é¡µåˆ†äº«å¼¹çª—                 â”‚
â”‚  â””â”€â”€ ShareDialogBase.tsx        â†’ ç»“æœç±»åˆ†äº«å¼¹çª—                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¥å…·å±‚                                                          â”‚
â”‚  â”œâ”€â”€ executeOneClickShare()     â†’ ä¸€é”®åˆ†äº«æ ¸å¿ƒå‡½æ•°               â”‚
â”‚  â”œâ”€â”€ useOneClickShare()         â†’ ä¸€é”®åˆ†äº« Hook                  â”‚
â”‚  â”œâ”€â”€ useQRCode()                â†’ ç»Ÿä¸€ QR ç ç”Ÿæˆ                 â”‚
â”‚  â””â”€â”€ getPromotionDomain()       â†’ ç»Ÿä¸€åŸŸåè·å–                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç®¡ç†å±‚                                                          â”‚
â”‚  â””â”€â”€ /admin/share-cards         â†’ åˆ†äº«å¡ç‰‡ç®¡ç†åå°               â”‚
â”‚      â”œâ”€â”€ ShareCardPreviewItem   â†’ å¡ç‰‡é¢„è§ˆ+ç”Ÿæˆæµ‹è¯•              â”‚
â”‚      â””â”€â”€ ShareCardConsistencyPanel â†’ ä¸€è‡´æ€§æ£€æŸ¥é¢æ¿              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### é—®é¢˜ï¼šå“ªäº›åˆ†äº«åŠŸèƒ½æœªçº³å…¥ç»Ÿä¸€ç®¡ç†ï¼Ÿ

ç»è¿‡ä»£ç æœç´¢ï¼Œå‘ç°ä»¥ä¸‹æƒ…å†µï¼š

| çŠ¶æ€ | ç»„ä»¶/é¡µé¢ | æ˜¯å¦åœ¨æ³¨å†Œè¡¨ | æ˜¯å¦ä½¿ç”¨ç»Ÿä¸€æ¨¡å— |
|:-----|:----------|:------------|:----------------|
| âœ… | IntroShareDialog (17ä¸ªä»‹ç»é¡µ) | âœ… å·²æ³¨å†Œ | âœ… ä½¿ç”¨ |
| âœ… | SCL90ShareDialog | âœ… å·²æ³¨å†Œ | âœ… ä½¿ç”¨ |
| âœ… | EmotionHealthShareDialog | âœ… å·²æ³¨å†Œ | âœ… ä½¿ç”¨ |
| âœ… | WealthCampInviteCard | âœ… å·²æ³¨å†Œ | âœ… useOneClickShare |
| âš ï¸ | **PartnerPlanShareCard** | âŒ æœªæ³¨å†Œ | âš ï¸ éƒ¨åˆ†ä½¿ç”¨ |
| âš ï¸ | PostDetailSheet (ç¤¾åŒºåˆ†äº«) | âœ… å·²æ³¨å†Œ | âš ï¸ ç›´æ¥ html2canvas |
| âš ï¸ | TeenInviteShareDialog | âŒ æœªæ³¨å†Œ | éœ€æ£€æŸ¥ |
| âš ï¸ | PosterCenter / PosterGenerator | âŒ æœªæ³¨å†Œ | âš ï¸ ç›´æ¥ html2canvas |
| âš ï¸ | WeeklyTagReport (PDFå¯¼å‡º) | âŒ æœªæ³¨å†Œ | âš ï¸ ç›´æ¥ html2canvas |
| âš ï¸ | EnergyDeclaration | âŒ æœªæ³¨å†Œ | âš ï¸ ç›´æ¥ html2canvas |

---

### è§£å†³æ–¹æ¡ˆï¼šåˆ›å»ºå…¨ç«™åˆ†äº«å®¡è®¡å·¥å…·

#### 1. æ‰©å±• `shareCardsRegistry.ts` æ·»åŠ ç¼ºå¤±å¡ç‰‡

å°†æœªæ³¨å†Œçš„åˆ†äº«å¡ç‰‡æ·»åŠ åˆ°æ³¨å†Œè¡¨ï¼š

```typescript
// æ–°å¢åˆ° resultCards æ•°ç»„
{
  id: 'partner-plan',
  title: 'æœ‰åŠ²åˆä¼™äººè®¡åˆ’',
  category: 'partner',
  emoji: 'ğŸš€',
  type: 'result',
  componentName: 'PartnerPlanShareCard',
  description: 'åˆä¼™äººè®¡åˆ’åˆ†äº«æµ·æŠ¥',
},
{
  id: 'teen-invite',
  title: 'é’å°‘å¹´é‚€è¯·å¡',
  category: 'tool',
  emoji: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§',
  type: 'result',
  componentName: 'TeenInviteShareDialog',
  description: 'äº²å­åŒè½¨æ¨¡å¼é‚€è¯·åˆ†äº«',
},
{
  id: 'poster-center',
  title: 'AIæµ·æŠ¥ç”Ÿæˆå™¨',
  category: 'tool',
  emoji: 'ğŸ¨',
  type: 'result',
  componentName: 'PosterGenerator',
  description: 'è‡ªå®šä¹‰æ¨å¹¿æµ·æŠ¥',
},
{
  id: 'energy-declaration',
  title: 'èƒ½é‡å®£è¨€å¡',
  category: 'tool',
  emoji: 'âš¡',
  type: 'result',
  componentName: 'EnergyDeclaration',
  description: 'æ¯æ—¥èƒ½é‡å®£è¨€åˆ†äº«',
},
```

#### 2. æ‰©å±•ä¸€è‡´æ€§æ£€æŸ¥å·¥å…·

æ›´æ–° `shareCardConsistencyCheck.ts` çš„ `COMPLIANT_CARDS` åˆ—è¡¨ï¼š

```typescript
const COMPLIANT_CARDS = [
  // ç°æœ‰åˆè§„å¡ç‰‡...
  'SCL90ShareCard',
  'EmotionHealthShareCard',
  // ...
  
  // æ–°å¢æ£€æŸ¥
  'PartnerPlanShareCard',  // éœ€éªŒè¯
  'PosterGenerator',       // éœ€éªŒè¯
];
```

#### 3. åˆ›å»ºåˆ†äº«æŒ‰é’®å®¡è®¡é¢æ¿

åœ¨ `/admin/share-cards` é¡µé¢æ–°å¢å®¡è®¡åŠŸèƒ½ï¼š

```typescript
// æ–°å»º src/components/admin/ShareButtonAuditPanel.tsx
export function ShareButtonAuditPanel() {
  // æ‰«æé¡¹ç›®ä¸­æ‰€æœ‰ä½¿ç”¨ html2canvas çš„æ–‡ä»¶
  // å¯¹æ¯” shareCardsRegistry æ£€æŸ¥æ˜¯å¦é—æ¼
  // æ˜¾ç¤ºï¼š
  // - å·²æ³¨å†Œå¹¶åˆè§„çš„å¡ç‰‡
  // - å·²æ³¨å†Œä½†æœªä½¿ç”¨ç»Ÿä¸€æ¨¡å—çš„å¡ç‰‡
  // - æœªæ³¨å†Œçš„åˆ†äº«åŠŸèƒ½
}
```

---

### å®æ–½æ­¥éª¤

| æ­¥éª¤ | æ“ä½œ | æ–‡ä»¶ |
|:-----|:-----|:-----|
| 1 | å°† PartnerPlanShareCard æ·»åŠ åˆ°æ³¨å†Œè¡¨ | `shareCardsRegistry.ts` |
| 2 | æ·»åŠ å…¶ä»–ç¼ºå¤±çš„åˆ†äº«å¡ç‰‡åˆ°æ³¨å†Œè¡¨ | `shareCardsRegistry.ts` |
| 3 | æ›´æ–°ä¸€è‡´æ€§æ£€æŸ¥çš„åˆè§„åˆ—è¡¨ | `shareCardConsistencyCheck.ts` |
| 4 | åˆ›å»ºåˆ†äº«æŒ‰é’®å®¡è®¡é¢æ¿ï¼ˆå¯é€‰ï¼‰ | `ShareButtonAuditPanel.tsx` |
| 5 | åœ¨ç®¡ç†åå°é›†æˆå®¡è®¡åŠŸèƒ½ | `ShareCardsAdmin.tsx` |

---

### å¿«é€Ÿæ£€æŸ¥æ¸…å•

#### å¦‚ä½•éªŒè¯æŸä¸ªåˆ†äº«åŠŸèƒ½æ˜¯å¦åˆè§„ï¼Ÿ

1. **æ£€æŸ¥æ˜¯å¦åœ¨æ³¨å†Œè¡¨ä¸­**
   ```bash
   # æœç´¢ç»„ä»¶åæ˜¯å¦åœ¨ shareCardsRegistry.ts
   grep "PartnerPlanShareCard" src/config/shareCardsRegistry.ts
   ```

2. **æ£€æŸ¥æ˜¯å¦ä½¿ç”¨ç»Ÿä¸€å·¥å…·**
   ```typescript
   // åˆè§„ï¼šä½¿ç”¨è¿™äº›å‡½æ•°
   import { executeOneClickShare } from '@/utils/oneClickShare';
   import { useOneClickShare } from '@/hooks/useOneClickShare';
   import { useQRCode } from '@/utils/qrCodeUtils';
   import { getPromotionDomain } from '@/utils/partnerQRUtils';
   
   // ä¸åˆè§„ï¼šç›´æ¥ä½¿ç”¨
   import html2canvas from 'html2canvas';
   import QRCode from 'qrcode';
   window.location.origin  // åº”ä½¿ç”¨ getPromotionDomain()
   ```

3. **æ£€æŸ¥å“ç‰Œæ ‡è¯†**
   ```typescript
   // åˆè§„
   "Powered by æœ‰åŠ²AI"
   
   // ä¸åˆè§„
   "æœ‰åŠ²ç”Ÿæ´»"
   "æœ‰åŠ²AI Â· è´¢å¯Œæ•™ç»ƒ"
   ```

4. **æ£€æŸ¥å®½åº¦è§„èŒƒ**
   - ç»“æœç±»å¡ç‰‡ï¼š340px
   - å·¥å…·ç±»å¡ç‰‡ï¼š420px

---

### å½“å‰éœ€è¦ä¿®å¤çš„ä¼˜å…ˆé¡¹

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | åŸå›  |
|:------|:-----|:-----|
| ğŸ”´ é«˜ | å°† PartnerPlanShareCard åŠ å…¥æ³¨å†Œè¡¨ | åˆšå®Œæˆå¼€å‘ä½†æœªæ³¨å†Œ |
| ğŸŸ¡ ä¸­ | ç¡®ä¿ PosterCenter ä½¿ç”¨ç»Ÿä¸€ QR/åŸŸå | ç›´æ¥ä½¿ç”¨ html2canvas |
| ğŸŸ¡ ä¸­ | ç¡®ä¿ EnergyDeclaration ä½¿ç”¨ç»Ÿä¸€æ¨¡å— | ç›´æ¥ä½¿ç”¨ html2canvas |
| ğŸŸ¢ ä½ | åˆ›å»ºè‡ªåŠ¨åŒ–å®¡è®¡é¢æ¿ | æå‡é•¿æœŸå¯ç»´æŠ¤æ€§ |

---

### é¢„æœŸæ•ˆæœ

1. **æ‰€æœ‰åˆ†äº«å¡ç‰‡å¯åœ¨ `/admin/share-cards` æŸ¥çœ‹**
2. **ä¸€è‡´æ€§æ£€æŸ¥é¢æ¿è¦†ç›–å…¨éƒ¨å¡ç‰‡**
3. **æ–°å¼€å‘çš„åˆ†äº«åŠŸèƒ½æœ‰æ˜ç¡®çš„æ³¨å†Œæµç¨‹**
4. **ç»Ÿä¸€çš„ QR ç ã€åŸŸåã€å“ç‰Œæ ‡è¯†**

