import { serve } from "https://deno.land/std@0.168.0/http/server.ts";

const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
};

// é¢œè‰²æ˜ å°„ï¼šTailwindç±»å -> HEX
const colorMap: Record<string, string> = {
  'teal': '#14B8A6',
  'cyan': '#06B6D4',
  'blue': '#3B82F6',
  'indigo': '#6366F1',
  'amber': '#F59E0B',
  'yellow': '#EAB308',
  'orange': '#F97316',
  'rose': '#F43F5E',
  'slate': '#64748B',
  'gray': '#6B7280',
  'zinc': '#71717A',
  'stone': '#78716C',
  'purple': '#A855F7',
  'violet': '#8B5CF6',
  'fuchsia': '#D946EF',
  'red': '#EF4444',
  'pink': '#EC4899',
  'emerald': '#10B981',
  'green': '#22C55E',
  'neutral': '#737373',
};

// æ¸å˜èµ·å§‹å’Œç»“æŸé¢œè‰²
const gradientColorMap: Record<string, { from: string; to: string }> = {
  'from-teal-500 to-emerald-600': { from: '#14B8A6', to: '#059669' },
  'from-amber-500 to-orange-500': { from: '#F59E0B', to: '#F97316' },
  'from-slate-500 to-blue-600': { from: '#64748B', to: '#2563EB' },
  'from-violet-500 to-purple-600': { from: '#8B5CF6', to: '#9333EA' },
  'from-orange-500 to-red-500': { from: '#F97316', to: '#EF4444' },
  'from-pink-500 to-rose-600': { from: '#EC4899', to: '#E11D48' },
  'from-stone-500 to-neutral-600': { from: '#78716C', to: '#525252' },
  'from-red-500 to-rose-600': { from: '#EF4444', to: '#E11D48' },
  'from-indigo-500 to-blue-600': { from: '#6366F1', to: '#2563EB' },
};

// èƒŒæ™¯æ¸å˜é¢œè‰²
const bgGradientColorMap: Record<string, { from: string; via: string; to: string }> = {
  'from-teal-50 via-cyan-50 to-blue-50': { from: '#F0FDFA', via: '#ECFEFF', to: '#EFF6FF' },
  'from-amber-50 via-yellow-50 to-orange-50': { from: '#FFFBEB', via: '#FEFCE8', to: '#FFF7ED' },
  'from-slate-50 via-gray-50 to-zinc-50': { from: '#F8FAFC', via: '#F9FAFB', to: '#FAFAFA' },
  'from-purple-50 via-violet-50 to-indigo-50': { from: '#FAF5FF', via: '#F5F3FF', to: '#EEF2FF' },
  'from-orange-50 via-red-50 to-rose-50': { from: '#FFF7ED', via: '#FEF2F2', to: '#FFF1F2' },
  'from-rose-50 via-pink-50 to-fuchsia-50': { from: '#FFF1F2', via: '#FDF2F8', to: '#FDF4FF' },
  'from-gray-50 via-slate-50 to-zinc-50': { from: '#F9FAFB', via: '#F8FAFC', to: '#FAFAFA' },
  'from-red-50 via-rose-50 to-pink-50': { from: '#FEF2F2', via: '#FFF1F2', to: '#FDF2F8' },
  'from-indigo-50 via-blue-50 to-cyan-50': { from: '#EEF2FF', via: '#EFF6FF', to: '#ECFEFF' },
};

// 9ç§æƒ…ç»ªé…ç½®
const emotionTypes = [
  {
    id: "panic",
    title: "ææ…Œ",
    subtitle: "å¿ƒè·³å¿«äº†ï¼Œä½†ä½ ä¾ç„¶å®‰å…¨",
    emoji: "ğŸ˜°",
    gradient: "from-teal-500 to-emerald-600",
    bgGradient: "from-teal-50 via-cyan-50 to-blue-50",
    stageColors: { primary: "teal", secondary: "cyan", tertiary: "blue", quaternary: "indigo" },
    reminders: [
      "æˆ‘ç°åœ¨çš„èº«ä½“ååº”æ˜¯æ­£å¸¸çš„è­¦æŠ¥ï¼Œä¸æ˜¯å±é™©ã€‚",
      "ææ…Œæ¥å¾—å¿«ï¼Œä¹Ÿä¼šèµ°å¾—å¿«ï¼Œå®ƒä»æœªåœç•™å¤ªä¹…ã€‚",
      "æˆ‘èƒ½æ„Ÿè§‰åˆ°å¿ƒè·³ï¼Œæ˜¯æˆ‘çš„èº«ä½“åœ¨ä¿æŠ¤æˆ‘ã€‚",
      "ææ…Œä¸æ˜¯å¤±æ§ï¼Œè€Œæ˜¯è¿‡åº¦è­¦è§‰ã€‚",
      "å‘¼å¸å˜å¿«ä¸ä»£è¡¨åäº‹ï¼Œåªæ˜¯èº«ä½“åœ¨åº”å¯¹ã€‚",
      "å¾ˆå¤šäººéƒ½ç»å†è¿‡è¿™æ ·çš„æ„Ÿè§‰ï¼Œæˆ‘ä¸æ˜¯ä¾‹å¤–ã€‚",
      "ææ…Œæ˜¯æš‚æ—¶çš„ï¼Œä¸ä¼šä¸€ç›´æŒç»­ã€‚",
      "æˆ‘èƒ½å¯Ÿè§‰åˆ°è¿™äº›ä¿¡å·ï¼Œæ˜¯æ¢å¤çš„ç¬¬ä¸€æ­¥ã€‚",
      "ææ…Œä¸æ˜¯å±é™©ï¼Œè€Œæ˜¯æˆ‘çš„ç¥ç»ç³»ç»Ÿå¤ªç´§å¼ ã€‚",
      "æˆ‘å®³æ€•çš„æ˜¯èº«ä½“æ„Ÿè§‰ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„äº‹ä»¶ã€‚",
      "è¿™æ˜¯è¯¯æŠ¥ï¼Œä¸æ˜¯åäº‹å‘ç”Ÿã€‚",
      "æˆ‘å¯ä»¥ä¸å–œæ¬¢è¿™ç§æ„Ÿè§‰ï¼Œä½†æˆ‘ä»ç„¶å®‰å…¨ã€‚",
      "ææ…Œæ¥è‡ªè¿‡å»çš„ç»éªŒï¼Œä¸æ˜¯æ­¤åˆ»çš„å¨èƒã€‚",
      "å®ƒä¸æ˜¯æ”»å‡»æˆ‘ï¼Œåªæ˜¯æƒ³ä¿æŠ¤æˆ‘ã€‚",
      "ææ…Œçœ‹ä¼¼å¼ºçƒˆï¼Œä½†æ— æ³•ä¼¤å®³æˆ‘ã€‚",
      "æˆ‘è¶Šç†è§£ï¼Œå®ƒè¶Šå¿«ç¦»å¼€ã€‚",
      "æ³¨æ„è„šåº•ï¼Œæˆ‘ä¼šæ„Ÿè§‰æ›´ç¨³ã€‚",
      "ç¼“æ…¢å¸æ°”ã€ç¼“æ…¢åæ°”ï¼Œæˆ‘ä¼šé™ä¸‹æ¥ã€‚",
      "æˆ‘çš„èº«ä½“æ­£åœ¨ä»è­¦æŠ¥åˆ‡æ¢åˆ°å®‰å…¨ã€‚",
      "æ¥å—ææ…Œçš„å­˜åœ¨ï¼Œåè€Œè®©å®ƒæ›´å¿«æ¶ˆé€€ã€‚",
      "æˆ‘ä¸éœ€è¦å‹ä½å®ƒï¼Œè®©å®ƒè‡ªç„¶æµè¿‡ã€‚",
      "ææ…Œæ˜¯ä¸€é˜µé£ï¼Œä¸ä¼šé•¿ä¹…åœç•™ã€‚",
      "æ”¾æ¾è‚©è†€ï¼Œæˆ‘çš„ç´§ç»·ä¼šä¸‹é™ã€‚",
      "èº«ä½“æ¯”æˆ‘æƒ³è±¡åœ°æ›´å¿«æ¢å¤ã€‚",
      "è¿™æ¬¡ææ…Œæ¥äº†ï¼Œæˆ‘è¿˜æ˜¯æ’‘ä½äº†ã€‚",
      "æˆ‘è¯æ˜äº†è‡ªå·±æ¯”ææ…Œæ›´å¼ºã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¼šä¸è¿™ç§æ„Ÿè§‰å…±å­˜ã€‚",
      "æˆ‘ä¸æ˜¯ææ…Œï¼Œæˆ‘åªæ˜¯ç»å†ææ…Œã€‚",
      "æ¯æ¬¡å¹³ç¨³ä¸‹æ¥ï¼Œéƒ½åœ¨è®­ç»ƒç¥ç»ç³»ç»Ÿæ›´åšéŸ§ã€‚",
      "æˆ‘å·²ç»åœ¨å˜å¾—æœ‰åŠ›é‡ã€‚",
      "æˆ‘ä¸æ˜¯è¢«å›°ä½ï¼Œæˆ‘æ­£åœ¨æˆé•¿ã€‚",
      "ææ…Œæ¯æ¬¡æ¥ï¼Œæˆ‘éƒ½èƒ½å¤„ç†ï¼Œæˆ‘å·²ç»åšåˆ°äº†ã€‚"
    ]
  },
  {
    id: "worry",
    title: "æ‹…å¿ƒ",
    subtitle: "è„‘å­è½¬å¾ˆå¿«ï¼Œä½†ä½ ä¸éœ€è¦é©¬ä¸Šè§£å†³",
    emoji: "ğŸ¤”",
    gradient: "from-amber-500 to-orange-500",
    bgGradient: "from-amber-50 via-yellow-50 to-orange-50",
    stageColors: { primary: "amber", secondary: "yellow", tertiary: "orange", quaternary: "rose" },
    reminders: [
      "æˆ‘ç°åœ¨æ˜¯åœ¨é¢„æƒ³æœªæ¥ï¼Œè€Œä¸æ˜¯åº”å¯¹ç°å®ã€‚",
      "å¤§è„‘æ­£åœ¨æ’­æ”¾æœ€åç‰ˆæœ¬ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚",
      "æ‹…å¿ƒæ˜¯å¤§è„‘çš„ä¿æŠ¤æœºåˆ¶ï¼Œä¸æ˜¯æƒ©ç½šã€‚",
      "æˆ‘æ³¨æ„åˆ°è‡ªå·±æƒ³å¤ªå¤šäº†ï¼Œè¿™æ˜¯ç¬¬ä¸€æ­¥ã€‚",
      "æ‹…å¿ƒæ˜¯ä¸€ç§æ„Ÿè§‰ï¼Œä¸æ˜¯äº‹å®ã€‚",
      "æˆ‘ç°åœ¨å¾ˆç´§å¼ ï¼Œä½†æˆ‘ä»ç„¶å®‰å…¨ã€‚",
      "è¿™æ˜¯å¤§è„‘å¿™è¿‡å¤´äº†ï¼Œä¸æ˜¯æˆ‘åšé”™äº†ã€‚",
      "æƒ³æ³•åªæ˜¯æƒ³æ³•ï¼Œä¸æ˜¯ç»“å±€ã€‚",
      "æˆ‘æ‹…å¿ƒçš„æ˜¯ä¸ç¡®å®šæ€§ï¼Œä¸æ˜¯äº‹æƒ…æœ¬èº«ã€‚",
      "ç´¯çš„æ—¶å€™ï¼Œå¤§è„‘ä¼šè‡ªåŠ¨æƒ³åçš„ã€‚",
      "æ‹…å¿ƒä»£è¡¨æˆ‘åœ¨ä¹ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚",
      "æˆ‘çš„æƒ³è±¡æ¯”ç°å®å¯æ€•å¾ˆå¤šã€‚",
      "æ‹…å¿ƒæ— æ³•æ”¹å˜ç»“æœï¼Œåªä¼šæ¶ˆè€—æˆ‘ã€‚",
      "æˆ‘ä¸æ˜¯ä¸å¤Ÿå¥½ï¼Œæˆ‘åªæ˜¯å¤ªç´§ç»·ã€‚",
      "æ‹…å¿ƒè¯´æ˜æˆ‘æœ‰è´£ä»»æ„Ÿã€‚",
      "èƒ½è§‰å¯Ÿæ‹…å¿ƒï¼Œå°±æ˜¯æˆç†Ÿçš„å¾å…†ã€‚",
      "æˆ‘ä¸éœ€è¦ä¸€æ¬¡è§£å†³å…¨éƒ¨ï¼Œåªéœ€å…ˆç¨³ä½è‡ªå·±ã€‚",
      "å°†æ³¨æ„åŠ›æ”¾å›èº«ä½“ï¼Œæˆ‘ä¼šæ¸…æ™°ä¸€äº›ã€‚",
      "æŠŠæƒ³æ³•å†™ä¸‹æ¥ï¼Œæ‚éŸ³ä¼šå˜å°‘ã€‚",
      "æš‚åœä¸‰ç§’æ·±å‘¼å¸ï¼Œæ‹…å¿ƒæ„Ÿä¼šä¸‹é™ã€‚",
      "ä¸æ˜¯æ¯ä¸ªæƒ³æ³•éƒ½å€¼å¾—ç›¸ä¿¡ã€‚",
      "æˆ‘å¯ä»¥é€‰æ‹©æš‚æ—¶ä¸è·Ÿéšè¿™äº›å¿µå¤´ã€‚",
      "ä¸€æ­¥ä¸€æ­¥æ¥æ‰æ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚",
      "ç»™è‡ªå·±ä¸€äº›ç©ºé—´ï¼Œå¤§è„‘è‡ªç„¶ä¼šå®‰é™ã€‚",
      "æˆ‘å·²ç»å¼€å§‹èƒ½åˆ†è¾¨æƒ³æ³•ä¸äº‹å®ã€‚",
      "å¤§è„‘ä¸å†é‚£ä¹ˆå®¹æ˜“æŠŠæˆ‘å¸¦å‘æœ€åçš„æ–¹å‘ã€‚",
      "æ‹…å¿ƒä¸èƒ½æ§åˆ¶æˆ‘ï¼Œæˆ‘æœ‰é€‰æ‹©ã€‚",
      "æˆ‘èƒ½åœä¸‹æ¥ï¼Œå°±æ˜¯åŠ›é‡çš„è¡¨ç°ã€‚",
      "æ¯ä¸€æ¬¡å‡å°‘ä¸€ç‚¹æ‹…å¿ƒéƒ½æ˜¯æˆé•¿ã€‚",
      "æˆ‘è¶Šæ¥è¶Šä¿¡ä»»è‡ªå·±äº†ã€‚",
      "ä¸éœ€è¦å®Œç¾ï¼Œæˆ‘å·²ç»åšå¾—å¾ˆå¥½ã€‚",
      "æˆ‘å€¼å¾—æ›´è½»æ¾çš„ç”Ÿæ´»ï¼Œè€Œæˆ‘æ­£åœ¨èµ°å‘é‚£é‡Œã€‚"
    ]
  },
  {
    id: "negative",
    title: "è´Ÿé¢",
    subtitle: "ä½ ä¸æ˜¯è´Ÿé¢ï¼Œä½ åªæ˜¯ç´¯äº†",
    emoji: "ğŸ˜”",
    gradient: "from-slate-500 to-blue-600",
    bgGradient: "from-slate-50 via-gray-50 to-zinc-50",
    stageColors: { primary: "slate", secondary: "gray", tertiary: "zinc", quaternary: "stone" },
    reminders: [
      "æˆ‘ç°åœ¨çš„å¿ƒæƒ…æ¯”è¾ƒæš—ï¼Œä¸ä»£è¡¨æˆ‘è¿™ä¸ªäººä¸å¥½ã€‚",
      "è´Ÿé¢æƒ…ç»ªåªæ˜¯ç–²åŠ³çš„ä¿¡å·ã€‚",
      "æˆ‘ä¸æ˜¯å˜å·®äº†ï¼Œåªæ˜¯æ¶ˆè€—è¿‡å¤šã€‚",
      "æˆ‘èƒ½å¯Ÿè§‰åˆ°è¿™ç§ä½è½ï¼Œæ˜¯è§‰é†’ã€‚",
      "è´Ÿé¢æƒ…ç»ªä¸ç­‰äºè´Ÿèƒ½é‡ï¼Œå®ƒåªæ˜¯éœ€è¦è¢«çœ‹è§ã€‚",
      "æˆ‘å¹¶éå¤±æ§ï¼Œåªæ˜¯æœ‰ç‚¹æ’‘ä¸ä½ã€‚",
      "è´Ÿé¢æƒ³æ³•å‡ºç°å¾ˆæ­£å¸¸ã€‚",
      "æƒ…ç»ªå˜é‡ä¹Ÿä¸æ˜¯æˆ‘çš„é”™ã€‚",
      "æˆ‘ä¸æ˜¯æ‚²è§‚ï¼Œåªæ˜¯ç´¯äº†ã€‚",
      "å¤§è„‘åœ¨ä½èƒ½é‡æ—¶å®¹æ˜“æ”¾å¤§è´Ÿé¢çš„éƒ¨åˆ†ã€‚",
      "è´Ÿé¢æƒ³æ³•ä¸æ˜¯äº‹å®ï¼Œåªæ˜¯çŠ¶æ€ã€‚",
      "æˆ‘åœ¨ä¹çš„è¶Šå¤šï¼Œè´Ÿé¢è¶Šå¼ºçƒˆã€‚",
      "æˆ‘æ˜¯åœ¨ä¿æŠ¤è‡ªå·±ï¼Œè€Œä¸æ˜¯é€ƒé¿ã€‚",
      "è´Ÿé¢æƒ…ç»ªæé†’æˆ‘éœ€è¦ä¼‘æ¯ã€‚",
      "æˆ‘å¹¶ä¸æ˜¯ä¸€ä¸ªè´Ÿé¢çš„äººã€‚",
      "æƒ…ç»ªä½ï¼Œä¸ä»£è¡¨æˆ‘çš„äººç”Ÿä½ã€‚",
      "å…ˆåœä¸€ä¸‹ï¼Œæˆ‘ä¸éœ€è¦ç¡¬æ’‘ã€‚",
      "ä¸€ç‚¹ç‚¹å‘¼å¸ï¼Œä¼šå¸®æˆ‘ä»æ··ä¹±å›åˆ°å®‰ç¨³ã€‚",
      "æˆ‘å¯ä»¥æŠŠæ³¨æ„æ”¾åœ¨èº«ä½“ï¼Œè€Œä¸æ˜¯æƒ³æ³•ã€‚",
      "æˆ‘å…è®¸è´Ÿé¢å­˜åœ¨ï¼Œå®ƒå°±ä¼šæ…¢æ…¢å˜è½»ã€‚",
      "ç°åœ¨åªéœ€è¦ç…§é¡¾è‡ªå·±ï¼Œè€Œä¸æ˜¯ä¿®å¤ä¸–ç•Œã€‚",
      "æ”¾ä¸‹è¯„åˆ¤ï¼Œæˆ‘ä¼šè½»ä¸€äº›ã€‚",
      "æˆ‘å·²ç»åŠªåŠ›å¾ˆä¹…äº†ï¼Œå¯ä»¥ä¼‘æ¯ä¸€ä¸‹ã€‚",
      "æ…¢ä¸‹æ¥ï¼Œæ˜¯ä¸€ç§åŠ›é‡ã€‚",
      "æˆ‘çš„è´Ÿé¢æ¥è‡ªæ¶ˆè€—ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¹ ä¸æƒ…ç»ªå…±å¤„ï¼Œè€Œä¸æ˜¯è¢«å®ƒåæ²¡ã€‚",
      "é˜´å¤©ä¸ä¼šæŠ¹æ‰æˆ‘çš„ä»·å€¼ã€‚",
      "æˆ‘çš„æ¢å¤èƒ½åŠ›æ¯”æˆ‘æƒ³è±¡æ›´å¼ºã€‚",
      "æˆ‘æ­£åœ¨é•¿æˆä¸€ä¸ªèƒ½å®¹çº³æƒ…ç»ªçš„äººã€‚",
      "æˆ‘å€¼å¾—è¢«ç†è§£ï¼Œä¹Ÿå€¼å¾—è¢«å–„å¾…ã€‚",
      "è´Ÿé¢ç»ˆä¼šè¿‡å»ï¼Œæˆ‘ä¼šé‡æ–°äº®èµ·æ¥ã€‚",
      "å³ä½¿ç°åœ¨è¿™æ ·ï¼Œæˆ‘ä¾ç„¶å€¼å¾—è¢«çˆ±ã€‚"
    ]
  },
  {
    id: "fear",
    title: "ææƒ§",
    subtitle: "å®³æ€•å¾ˆæ­£å¸¸ï¼Œä½ ä»ç„¶å¯ä»¥å¾€å‰ä¸€ç‚¹ç‚¹",
    emoji: "ğŸ˜¨",
    gradient: "from-violet-500 to-purple-600",
    bgGradient: "from-purple-50 via-violet-50 to-indigo-50",
    stageColors: { primary: "purple", secondary: "violet", tertiary: "indigo", quaternary: "fuchsia" },
    reminders: [
      "æˆ‘ç°åœ¨çš„å®³æ€•æ˜¯æ­£å¸¸çš„ç”Ÿå­˜æœ¬èƒ½ã€‚",
      "ææƒ§æ˜¯ä¸€ç§ä¿æŠ¤ï¼Œè€Œä¸æ˜¯å¤±è´¥ã€‚",
      "æˆ‘è§‰å¾—è‡ªå·±å®³æ€•ï¼Œæ˜¯å› ä¸ºæˆ‘åœ¨ä¹ã€‚",
      "æˆ‘èƒ½å¯Ÿè§‰ææƒ§ï¼Œè¿™å·²ç»æ˜¯å¼€å§‹ã€‚",
      "å®³æ€•ä¸ä»£è¡¨æˆ‘è½¯å¼±ã€‚",
      "ææƒ§å‡ºç°ï¼Œå¹¶ä¸æ„å‘³ç€æˆ‘åšä¸åˆ°ã€‚",
      "æœ‰äº›äº‹æƒ…æœ¬æ¥å°±ä¼šè®©äººç´§å¼ ã€‚",
      "æˆ‘ä¸æ˜¯ä¸€ä¸ªäººï¼Œå¾ˆå¤šäººä¹Ÿä¼šæ€•ã€‚",
      "æˆ‘çš„ææƒ§æ¥è‡ªä¸ç¡®å®šï¼Œä¸æ˜¯æ— èƒ½ã€‚",
      "æƒ³å¾—è¶Šå¤šï¼Œææƒ§è¶Šå¤§å¾ˆæ­£å¸¸ã€‚",
      "ææƒ§é€šå¸¸æ¯”çœŸå®æƒ…å†µå¤¸å¼ è®¸å¤šã€‚",
      "å®³æ€•è¯´æ˜æˆ‘å‡†å¤‡è¿ˆå‘æ–°çš„é¢†åŸŸã€‚",
      "æˆ‘ä¸æ˜¯é€ƒé¿ï¼Œæˆ‘æ˜¯åœ¨å¯»æ‰¾å®‰å…¨æ„Ÿã€‚",
      "ææƒ§ä¸ä¼šå†³å®šç»“æœã€‚",
      "åˆ«æŠŠææƒ§å½“æˆäº‹å®ï¼Œå®ƒåªæ˜¯æ„Ÿè§‰ã€‚",
      "å®ƒæ¥æ˜¯ä¸ºäº†æé†’æˆ‘ï¼Œè€Œä¸æ˜¯é˜»æ­¢æˆ‘ã€‚",
      "æˆ‘ä¸éœ€è¦ä¸€æ¬¡è·¨å¾ˆå¤§ï¼Œåªè¦ä¸€æ­¥ã€‚",
      "ææƒ§å¯ä»¥ä¸è¡ŒåŠ¨å…±å­˜ã€‚",
      "æ…¢ä¸€ç‚¹ï¼Œæˆ‘ä¼šæ›´æœ‰åŠ›æ°”é¢å¯¹ã€‚",
      "æŠŠææƒ§è¯´å‡ºæ¥ï¼Œå®ƒå°±ä¸å†é‚£ä¹ˆå¤§ã€‚",
      "æˆ‘è¶Šå…è®¸å®ƒå­˜åœ¨ï¼Œå®ƒè¶Šä¸ä¼šä¸»å¯¼æˆ‘ã€‚",
      "æ·±å‘¼å¸æ˜¯ç“¦è§£ææƒ§çš„ç¬¬ä¸€æ­¥ã€‚",
      "æˆ‘ä¸éœ€è¦è¯æ˜ï¼Œåªéœ€è¦å‰è¿›ä¸€ç‚¹ç‚¹ã€‚",
      "å®‰å…¨æ¥è‡ªæˆ‘çš„èŠ‚å¥ï¼Œè€Œä¸æ˜¯é€Ÿåº¦ã€‚",
      "æˆ‘æ­£åœ¨ç»ƒä¹ åœ¨å®³æ€•ä¸­å‰è¿›ï¼Œè¿™å¾ˆä¸å®¹æ˜“ã€‚",
      "æˆ‘æ¯è¿ˆå‡ºä¸€æ¬¡ï¼Œéƒ½åœ¨å˜æ›´å¼ºã€‚",
      "ææƒ§ä¸ä¼šæ¶ˆå¤±ï¼Œä½†æˆ‘ä¼šè¶Šæ¥è¶Šç¨³ã€‚",
      "æˆ‘æ¯”è‡ªå·±ä»¥ä¸ºçš„æ›´å‹‡æ•¢ã€‚",
      "æˆ‘å…è®¸è‡ªå·±ç´§å¼ ï¼Œå´ä»é€‰æ‹©è¡ŒåŠ¨ï¼Œè¿™å°±æ˜¯å‹‡æ°”ã€‚",
      "æˆ‘æ­£åœ¨æ‰©å¤§è‡ªå·±çš„èƒ½åŠ›èŒƒå›´ã€‚",
      "ææƒ§ä¸ä¼šå®šä¹‰æˆ‘ï¼Œé€‰æ‹©ä¼šã€‚",
      "æˆ‘å·²ç»ä¸æ˜¯ä»¥å‰é‚£ä¸ªäººï¼Œæˆ‘æ­£åœ¨æˆé•¿ã€‚"
    ]
  },
  {
    id: "irritable",
    title: "çƒ¦èº",
    subtitle: "ä¸æ˜¯ä½ ä¸å¥½ï¼Œæ˜¯ä½ è£…å¤ªå¤šäº†",
    emoji: "ğŸ˜¤",
    gradient: "from-orange-500 to-red-500",
    bgGradient: "from-orange-50 via-red-50 to-rose-50",
    stageColors: { primary: "orange", secondary: "red", tertiary: "rose", quaternary: "pink" },
    reminders: [
      "æˆ‘ç°åœ¨çš„çƒ¦æ˜¯ç´¯ç§¯å¤ªå¤šçš„ä¿¡å·ã€‚",
      "çƒ¦èºåªæ˜¯æ»¡è½½ï¼Œè€Œä¸æ˜¯åè„¾æ°”ã€‚",
      "æˆ‘çš„èº«ä½“åœ¨è¯´å¤Ÿäº†ã€‚",
      "æˆ‘èƒ½å¯Ÿè§‰ä¸è€ï¼Œè¿™æ˜¯å¥½äº‹ã€‚",
      "çƒ¦ä»£è¡¨æˆ‘éœ€è¦ç©ºé—´ï¼Œè€Œä¸æ˜¯é—®é¢˜ã€‚",
      "æˆ‘ä¸æ˜¯æ•…æ„å‡¶ï¼Œæ˜¯è¢«å‹å¾—å¤ªæ»¡ã€‚",
      "çƒ¦èºåªæ˜¯ä¸€ç§æƒ…ç»ªï¼Œä¸æ˜¯æ€§æ ¼ã€‚",
      "å¾ˆå¤šäº‹æƒ…åŒæ—¶å‘ç”Ÿæ—¶ï¼Œçƒ¦æ˜¯æ­£å¸¸ååº”ã€‚",
      "æˆ‘çš„çƒ¦æ¥è‡ªé•¿æœŸå‹æŠ‘ï¼Œè€Œä¸æ˜¯çªç„¶çˆ†å‘ã€‚",
      "æˆ‘ä¸æ˜¯å°é¢˜å¤§åšï¼Œæˆ‘åªæ˜¯ç´¯äº†ã€‚",
      "çƒ¦èºé€šå¸¸æ˜¯ç•Œé™è¢«çªç ´å¤ªå¤šæ¬¡ã€‚",
      "ä¸æ˜¯æˆ‘ä¸å¥½ï¼Œæ˜¯äº‹æƒ…å¤ªå¯†é›†ã€‚",
      "çƒ¦æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œæé†’æˆ‘ä¼‘æ¯ã€‚",
      "æˆ‘éœ€è¦çš„ä¸æ˜¯è´£æ€ªï¼Œè€Œæ˜¯æ¾ä¸€ç‚¹ã€‚",
      "çƒ¦å¹¶ä¸ä»£è¡¨æˆ‘å¤±æ§ã€‚",
      "çƒ¦æ˜¯éœ€è¦ï¼Œè€Œä¸æ˜¯ç¼ºç‚¹ã€‚",
      "æ·±å‘¼å¸èƒ½è®©çƒ¦å‡æ‰ä¸€åŠã€‚",
      "ç¦»å¼€ä¸€ä¸‹ï¼Œæˆ‘ä¼šæ¢å¤å¾—å¿«å¾ˆå¤šã€‚",
      "æˆ‘å¯ä»¥æŠŠæ³¨æ„ä»å¤–ç•Œæ‹‰å›è‡ªå·±ã€‚",
      "å…è®¸è‡ªå·±æš‚åœï¼Œå“ªæ€• 1 åˆ†é’Ÿã€‚",
      "æˆ‘ç°åœ¨æœ€éœ€è¦çš„æ˜¯æ”¾æ¾ï¼Œè€Œä¸æ˜¯å¿è€ã€‚",
      "æ¾å¼€è‚©è†€ï¼Œæˆ‘ä¼šè½»ä¸€ç‚¹ã€‚",
      "ä¸å›åº”ï¼Œæ˜¯ä¸€ç§ä¿æŠ¤ï¼Œè€Œä¸æ˜¯é€ƒé¿ã€‚",
      "ç»™è‡ªå·±ç©ºé—´ï¼Œæƒ…ç»ªè‡ªç„¶ä¼šä¸‹é™ã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¼šåœ¨çƒ¦èºä¸­ä¿æŠ¤è‡ªå·±ã€‚",
      "æˆ‘å¯ä»¥åœ¨ä¸çˆ†ç‚¸çš„æƒ…å†µä¸‹è¡¨è¾¾æˆ‘çš„ç•Œé™ã€‚",
      "çƒ¦èºæ˜¯æé†’æˆ‘ä¼˜å…ˆç…§é¡¾è‡ªå·±ã€‚",
      "æˆ‘è¶Šæ¥è¶Šèƒ½åˆ†è¾¨è‡ªå·±çš„éœ€è¦ã€‚",
      "æˆ‘ä¸æ˜¯åè„¾æ°”ï¼Œæˆ‘æ˜¯éœ€è¦å–˜æ¯ã€‚",
      "æˆ‘æ­£åœ¨å˜æˆæ›´ç¨³ã€æ›´æŸ”è½¯çš„äººã€‚",
      "çƒ¦æ˜¯æˆé•¿çš„ä¿¡å·ï¼Œè€Œä¸æ˜¯éšœç¢ã€‚",
      "æˆ‘å€¼å¾—è¢«ç†è§£ï¼Œä¹Ÿå€¼å¾—è¢«æ”¾è¿‡ã€‚"
    ]
  },
  {
    id: "stress",
    title: "å‹åŠ›",
    subtitle: "ä½ ä¸æ˜¯å¼±ï¼Œä½ æ˜¯æ‰¿æ‹…å¤ªå¤šå¤ªä¹…",
    emoji: "ğŸ˜©",
    gradient: "from-pink-500 to-rose-600",
    bgGradient: "from-rose-50 via-pink-50 to-fuchsia-50",
    stageColors: { primary: "rose", secondary: "pink", tertiary: "fuchsia", quaternary: "purple" },
    reminders: [
      "æˆ‘ç°åœ¨çš„å‹åŠ›å¹¶éæˆ‘çš„é”™ï¼Œè€Œæ˜¯è´Ÿè·å¤ªé‡ã€‚",
      "æˆ‘æ„Ÿå—åˆ°æ²‰é‡ï¼Œæ˜¯å› ä¸ºæˆ‘ä¸€ç›´åœ¨æ’‘ã€‚",
      "å‹åŠ›ä¸æ˜¯è½¯å¼±ï¼Œæ˜¯åŠªåŠ›å¤ªä¹…ã€‚",
      "æˆ‘èƒ½è§‰å¯Ÿå‹åŠ›ï¼Œå°±æ˜¯å¼€å§‹å¸ä¸‹å®ƒã€‚",
      "æˆ‘ä¸æ˜¯å¤±è´¥ï¼Œæˆ‘æ˜¯å¤ªæ‹¼äº†ã€‚",
      "æˆ‘æ‰¿æ‹…çš„æ¯”åˆ«äººçœ‹åˆ°çš„æ›´å¤šã€‚",
      "ç°åœ¨çš„ç´§ç»·è¯´æ˜æˆ‘éœ€è¦ä¼‘æ¯ã€‚",
      "æˆ‘ä¸æ˜¯æƒ…ç»ªåŒ–ï¼Œæˆ‘æ˜¯å¤ªç´¯ã€‚",
      "æˆ‘æ„Ÿå—åˆ°çš„é«˜å‹æ¥è‡ªè´£ä»»ï¼Œè€Œä¸æ˜¯æ— èƒ½ã€‚",
      "æˆ‘çš„ç´§ç»·æ˜¯é•¿æœŸç´¯ç§¯çš„ï¼Œä¸æ˜¯çªç„¶å‡ºç°ã€‚",
      "æˆ‘ä¸æ˜¯ä¸å¤Ÿå¥½ï¼Œæˆ‘åªæ˜¯è¢«éœ€è¦å¤ªå¤šã€‚",
      "å‹åŠ›å¤§ä¸ä»£è¡¨æˆ‘åšå¾—å·®ã€‚",
      "æˆ‘æƒ³åšå¾—æ›´å¥½ï¼Œæ‰€ä»¥æ‰æœ‰å‹åŠ›ã€‚",
      "é«˜å‹çŠ¶æ€ä¸‹ï¼Œå¤§è„‘ä¼šæ”¾å¤§è´Ÿé¢ã€‚",
      "æˆ‘ä¸æ˜¯ä¸€ä¸ªäººåœ¨æ‰¿å—è¿™äº›ã€‚",
      "å‹åŠ›æé†’æˆ‘è¯¥è°ƒæ•´èŠ‚å¥äº†ã€‚",
      "æ…¢ä¸€ç‚¹ï¼Œæˆ‘çš„èº«ä½“ä¼šæ›´ç¨³ã€‚",
      "æ·±å‘¼å¸å¯ä»¥è®©å‹åŠ›ä¸‹é™ã€‚",
      "æˆ‘ä¸éœ€è¦ä¸€æ¬¡æ‰›æ‰€æœ‰äº‹æƒ…ã€‚",
      "å¯ä»¥å…ˆæ”¾ä¸€ä¸ªå°ä»»åŠ¡ä¸‹æ¥ã€‚",
      "æˆ‘å€¼å¾—åœ¨å¿™ç¢Œä¸­æœ‰ä¸€ç‚¹å–˜æ¯ã€‚",
      "æˆ‘åšçš„å·²ç»å¤Ÿå¤šäº†ã€‚",
      "æ”¾æ¾è‚©è†€ï¼Œå‹åŠ›å°±ä¼šæ¾å¼€ä¸€ç‚¹ã€‚",
      "å…è®¸è‡ªå·±è„†å¼±ï¼Œæ˜¯åŠ›é‡çš„ä¸€ç§è¡¨ç°ã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¼šç”¨å¥åº·æ–¹å¼åº”å¯¹å‹åŠ›ã€‚",
      "æˆ‘å·²ç»æ¯”ä»¥å‰æ›´èƒ½è°ƒèŠ‚è‡ªå·±ã€‚",
      "å‹åŠ›ä¸ä¼šå®šä¹‰æˆ‘ï¼Œæˆ‘çš„é€‰æ‹©ä¼šã€‚",
      "æˆ‘æ­£åœ¨è®­ç»ƒè‡ªå·±å˜å¾—æ›´æœ‰éŸ§æ€§ã€‚",
      "æˆ‘å€¼å¾—è¢«æ”¯æŒï¼Œè€Œä¸æ˜¯è¢«è¦æ±‚æ›´å¤šã€‚",
      "æˆ‘å·²ç»åšå¾—è¶³å¤Ÿå¥½ã€‚",
      "æœªæ¥æˆ‘ä¼šæ›´è½»æ¾ï¼Œå› ä¸ºæˆ‘æ­£åœ¨è°ƒæ•´ã€‚",
      "æˆ‘é…å¾—ä¸Šä¸€ä¸ªæ›´å¹³è¡¡çš„ç”Ÿæ´»ã€‚"
    ]
  },
  {
    id: "powerless",
    title: "æ— åŠ›",
    subtitle: "ä½ ä¸æ˜¯æ²¡ç”¨ï¼Œä½ åªæ˜¯è€—å°½äº†",
    emoji: "ğŸ˜¶",
    gradient: "from-stone-500 to-neutral-600",
    bgGradient: "from-gray-50 via-slate-50 to-zinc-50",
    stageColors: { primary: "gray", secondary: "slate", tertiary: "zinc", quaternary: "neutral" },
    reminders: [
      "æˆ‘ç°åœ¨æ²¡æœ‰åŠ›æ°”ï¼Œæ˜¯æ­£å¸¸çš„ç–²åŠ³ååº”ã€‚",
      "æ— åŠ›ä¸ä»£è¡¨æˆ‘ä¸è¡Œï¼Œåªä»£è¡¨æˆ‘ç´¯äº†ã€‚",
      "æˆ‘èƒ½è§‰å¯Ÿæ— åŠ›ï¼Œå°±æ˜¯åŠ›é‡çš„å¼€ç«¯ã€‚",
      "èº«ä½“å’Œå¿ƒéƒ½åœ¨å‘æˆ‘æ±‚ä¼‘æ¯ã€‚",
      "æ— åŠ›ä¸ç­‰äºå¤±è´¥ã€‚",
      "æˆ‘ä¸éœ€è¦ä¸€ç›´æœ‰åŠ¨åŠ›ã€‚",
      "æˆ‘çš„æ— åŠ›è¯´æ˜æˆ‘å¤ªä¹…æ²¡æœ‰åœä¸‹æ¥ã€‚",
      "æˆ‘å€¼å¾—ä¼‘æ¯ï¼Œè€Œä¸æ˜¯è´£å¤‡ã€‚",
      "æˆ‘çš„æ— åŠ›æ¥è‡ªé•¿æœŸæ¶ˆè€—ï¼Œè€Œä¸æ˜¯èƒ½åŠ›ä¸è¶³ã€‚",
      "å¿™å¾—è¶Šä¹…ï¼Œç©ºå¾—è¶Šæ·±ã€‚",
      "æˆ‘ä¸æ˜¯æ‡’æ•£ï¼Œæˆ‘æ˜¯è¿‡åº¦ä»˜å‡ºã€‚",
      "åŠ¨åŠ›ä¸æ˜¯ä¸€ç›´éƒ½æœ‰çš„ï¼Œå®ƒéœ€è¦æ¢å¤ã€‚",
      "æ— åŠ›è¯´æ˜æˆ‘åœ¨åŠªåŠ›æ´»ç€ã€‚",
      "æˆ‘ç´¯å¾—å¤ªä¹…ï¼Œæ‰€ä»¥æä¸èµ·åŠ²ã€‚",
      "æˆ‘ä¸éœ€è¦æŠŠè‡ªå·±é€¼å›çŠ¶æ€ã€‚",
      "æ— åŠ›åªæ˜¯é˜¶æ®µï¼Œä¸æ˜¯ç»“å±€ã€‚",
      "æˆ‘ç°åœ¨éœ€è¦çš„æ˜¯è¡¥èƒ½ï¼Œè€Œä¸æ˜¯è¡ŒåŠ¨ã€‚",
      "æ…¢ä¸€ç‚¹ï¼Œèº«ä½“ä¼šå›åˆ°èŠ‚å¥ã€‚",
      "å°ä¼‘æ¯æ¯”ç¡¬æ’‘æœ‰æ•ˆå¾—å¤šã€‚",
      "æˆ‘å¯ä»¥è®©è‡ªå·±ä»€ä¹ˆéƒ½ä¸åšã€‚",
      "æˆ‘ä¸éœ€è¦é©¬ä¸Šå¥½èµ·æ¥ã€‚",
      "å‘¼å¸ä¼šå¸®æˆ‘æ‰¾åˆ°ä¸€ç‚¹ç‚¹åŠ›é‡ã€‚",
      "ä¸€ç‚¹ç‚¹æ¢å¤ï¼Œå°±æ˜¯è¿›æ­¥ã€‚",
      "å…ˆæŠŠèƒ½é‡ç•™ç»™æœ€é‡è¦çš„äº‹ã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¹ æ¸©æŸ”åœ°ç…§é¡¾è‡ªå·±ã€‚",
      "æˆ‘ä¸æ˜¯æ²¡åŠ¨åŠ›ï¼Œæˆ‘æ­£åœ¨è“„åŠ›ã€‚",
      "æˆ‘ä¼šæ…¢æ…¢æ¢å¤ï¼Œè€Œä¸æ˜¯æ°¸è¿œè¿™æ ·ã€‚",
      "æˆ‘çš„èŠ‚å¥ä¼šå›æ¥ã€‚",
      "æˆ‘çš„ä»·å€¼ä¸å–å†³äºæˆ‘ä»Šå¤©çš„çŠ¶æ€ã€‚",
      "æˆ‘æ­£åœ¨æˆä¸ºä¸€ä¸ªæ‡‚å¾—ä¼‘æ¯çš„äººã€‚",
      "æ— åŠ›çš„æˆ‘ï¼Œä¾ç„¶å€¼å¾—è¢«çˆ±ã€‚",
      "æˆ‘ä¼šå†æ¬¡æœ‰åŠ›é‡ï¼Œè€Œä¸”ä¼šæ›´ç¨³ã€‚"
    ]
  },
  {
    id: "collapse",
    title: "å´©æºƒ",
    subtitle: "ä½ åˆ°äº†æé™ï¼Œä½†è¿™ä¸æ˜¯ç»ˆç‚¹",
    emoji: "ğŸ˜­",
    gradient: "from-red-500 to-rose-600",
    bgGradient: "from-red-50 via-rose-50 to-pink-50",
    stageColors: { primary: "red", secondary: "rose", tertiary: "pink", quaternary: "fuchsia" },
    reminders: [
      "æˆ‘ç°åœ¨çš„å´©æºƒæ˜¯ä¸€ç§å¤ªå¤šäº†çš„è®¯å·ã€‚",
      "æƒ…ç»ªæ¶Œå‡ºæ¥ä¸ä»£è¡¨æˆ‘å¼±ã€‚",
      "æˆ‘åªæ˜¯å¤ªä¹…æ²¡æœ‰é‡Šæ”¾äº†ã€‚",
      "å´©æºƒæ˜¯èº«ä½“åœ¨æ¸…ç†ç§¯å‹ã€‚",
      "æˆ‘èƒ½æ„Ÿå—åˆ°å´©æºƒï¼Œå°±æ˜¯æ‰¿è®¤è‡ªå·±çš„çœŸå®ã€‚",
      "è¿™ä¸æ˜¯ç»ˆç‚¹ï¼Œæ˜¯é‡Šæ”¾çš„èµ·ç‚¹ã€‚",
      "æˆ‘ä¸æ˜¯å´©åï¼Œæˆ‘åªæ˜¯åˆ°äº†è¾¹ç•Œã€‚",
      "æˆ‘å…è®¸è‡ªå·±æ­¤åˆ»ä¸è¦åšå¼ºã€‚",
      "å´©æºƒæ˜¯å› ä¸ºæ’‘å¤ªä¹…äº†ã€‚",
      "å´©æºƒä¸æ„å‘³ç€æˆ‘ä¸è¡Œã€‚",
      "æˆ‘æ˜¯å¤ªç´¯ï¼Œè€Œä¸æ˜¯å¤ªè„†å¼±ã€‚",
      "æˆ‘çš„ç•Œé™è¢«å¤ªå¤šä¸œè¥¿å‹ç€ã€‚",
      "å´©æºƒåªæ˜¯å¤ªå¤šäº‹æƒ…ä¸€èµ·æ¥äº†ã€‚",
      "æˆ‘ä¸éœ€è¦è§£é‡Šæˆ‘çš„çœ¼æ³ªã€‚",
      "æˆ‘ä¸æ˜¯åœ¨é€ƒé¿ï¼Œæˆ‘æ˜¯åœ¨å‘¼æ•‘ã€‚",
      "å´©æºƒæ˜¯ä¸€ç§ä¿¡å·ï¼Œè€Œä¸æ˜¯ç»ˆç»“ã€‚",
      "æˆ‘å¯ä»¥å…ˆåœä¸‹æ‰€æœ‰äº‹æƒ…ã€‚",
      "ä¸éœ€è¦æ€è€ƒï¼Œåªéœ€è¦è®©èº«ä½“å®‰é™ã€‚",
      "å“­å®Œä¼šè½»ä¸€ç‚¹ï¼Œè®©è‡ªå·±é‡Šæ”¾ã€‚",
      "æ…¢ä¸€ç‚¹å‘¼å¸ï¼Œä¸–ç•Œæ²¡æœ‰é‚£ä¹ˆæ€¥ã€‚",
      "æˆ‘ç°åœ¨åªéœ€è¦å¯¹è‡ªå·±å¥½ä¸€ç‚¹ç‚¹ã€‚",
      "æ¥çº³å´©æºƒæœ¬èº«ï¼Œæ˜¯æ¢å¤çš„å¼€å§‹ã€‚",
      "æˆ‘ç°åœ¨ä¸éœ€è¦è§£å†³é—®é¢˜ï¼Œåªéœ€è¦å¾…ç€ã€‚",
      "å…ˆè®©è‡ªå·±è½åœ°ï¼Œå…¶ä»–ä»¥åå†è¯´ã€‚",
      "è¿™æ¬¡å´©æºƒè®©æˆ‘æ›´è®¤è¯†è‡ªå·±çš„è¾¹ç•Œã€‚",
      "å´©æºƒæ•™ä¼šæˆ‘ï¼šæˆ‘å¿…é¡»æ›´æ—©ç…§é¡¾è‡ªå·±ã€‚",
      "æˆ‘ä¸æ˜¯ä¸€ä¸ªå¤±è´¥çš„äººï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¤ªç´¯çš„äººã€‚",
      "æ¯ä¸€æ¬¡å´©æºƒåï¼Œæˆ‘éƒ½ä¼šå˜æ›´å¼ºä¸€ç‚¹ã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¼šåœ¨è„†å¼±ä¸­é‡å»ºåŠ›é‡ã€‚",
      "å´©æºƒä¸æ˜¯ç»ˆç‚¹ï¼Œæ˜¯è¢«è¿«æš‚åœã€‚",
      "æˆ‘å€¼å¾—æ›´æ¸©æŸ”åœ°å¯¹å¾…è‡ªå·±ã€‚",
      "æˆ‘ä¼šä»è¿™é‡Œé‡æ–°å¼€å§‹ï¼Œæ›´æœ‰è§‰å¯Ÿåœ°æ´»ç€ã€‚"
    ]
  },
  {
    id: "lost",
    title: "å¤±è½",
    subtitle: "ä½ å¤±å»äº†ä»€ä¹ˆï¼Œä½†ä½ ä¾ç„¶å®Œæ•´",
    emoji: "ğŸ˜",
    gradient: "from-indigo-500 to-blue-600",
    bgGradient: "from-indigo-50 via-blue-50 to-cyan-50",
    stageColors: { primary: "indigo", secondary: "blue", tertiary: "cyan", quaternary: "teal" },
    reminders: [
      "æˆ‘ç°åœ¨çš„å¤±è½æ˜¯å¯¹å¤±å»çš„æ­£å¸¸å›åº”ã€‚",
      "æˆ‘æ„Ÿåˆ°ç©ºæ˜¯å› ä¸ºæˆ‘æ›¾ç»åœ¨ä¹ã€‚",
      "å¤±è½ä¸æ˜¯è„†å¼±ï¼Œæ˜¯æœ‰æ„Ÿæƒ…çš„è¡¨ç°ã€‚",
      "æˆ‘èƒ½å¯Ÿè§‰å¤±è½ï¼Œæ˜¯å¯¹è‡ªå·±è´Ÿè´£çš„å¼€å§‹ã€‚",
      "å…è®¸å¤±è½å­˜åœ¨ï¼Œæ˜¯å¤åŸçš„ç¬¬ä¸€æ­¥ã€‚",
      "æˆ‘çš„å¤±è½æ˜¯çœŸå®çš„ï¼Œä¸éœ€è¦è¢«å¦è®¤ã€‚",
      "æˆ‘å¤±å»äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æˆ‘è¿˜åœ¨è¿™é‡Œã€‚",
      "å¤±è½è¯´æ˜æˆ‘æŠ•å…¥è¿‡ã€çæƒœè¿‡ã€‚",
      "æˆ‘å¤±è½çš„æ˜¯å¤–åœ¨ï¼Œä¸æ˜¯æˆ‘è‡ªå·±ã€‚",
      "å¤±å»ä¸ä»£è¡¨ç»“æŸï¼Œåªæ˜¯ä¸€ä¸ªå˜åŒ–ã€‚",
      "æˆ‘ä¼šé€‚åº”è¿™ä¸ªç©ºç¼ºï¼Œæ…¢æ…¢åœ°ã€‚",
      "æˆ‘å¯ä»¥å…è®¸è‡ªå·±ä¼¤å¿ƒä¸€ä¼šå„¿ã€‚",
      "å¤±è½ä¸ç­‰äºå¤±è´¥ï¼Œåªæ˜¯äººç”Ÿçš„ä¸€éƒ¨åˆ†ã€‚",
      "æˆ‘å€¼å¾—ä¸ºè‡ªå·±çš„æƒ…ç»ªç•™å‡ºç©ºé—´ã€‚",
      "æˆ‘ä¸éœ€è¦ç«‹åˆ»æŒ¯ä½œï¼Œå…ˆæ„Ÿå—å°±å¥½ã€‚",
      "å¤±è½æ˜¯çˆ±çš„å¦ä¸€é¢ã€‚",
      "æˆ‘å¯ä»¥å…ˆåœä¸‹æ¥ï¼Œä¸æ€¥ç€æ‰¾ç­”æ¡ˆã€‚",
      "è®©å¤±è½æµè¿‡æˆ‘ï¼Œè€Œä¸æ˜¯å‹ä½æˆ‘ã€‚",
      "æ­¤åˆ»æˆ‘åªéœ€è¦æ¸©æŸ”åœ°å¾…ç€ã€‚",
      "æ·±å‘¼å¸ï¼Œç©ºä¸ä¼šæ°¸è¿œè¿™ä¹ˆç©ºã€‚",
      "æˆ‘ä¸éœ€è¦å¿™ç¢Œæ¥å¡«æ»¡è¿™ç§æ„Ÿè§‰ã€‚",
      "å…è®¸è‡ªå·±æ…¢æ…¢æ‚²ä¼¤ï¼Œæ˜¯ä¸€ç§åŠ›é‡ã€‚",
      "æˆ‘ä¸éœ€è¦å‡è£…æ²¡äº‹ã€‚",
      "å…ˆè®©è‡ªå·±ç¨³ä¸‹æ¥ï¼Œæƒ…ç»ªä¼šå¹³å¤ã€‚",
      "æˆ‘æ­£åœ¨ä»å¤±è½ä¸­é‡æ–°è®¤è¯†è‡ªå·±ã€‚",
      "æˆ‘æ¯”æˆ‘ä»¥ä¸ºçš„æ›´æœ‰å¼¹æ€§ã€‚",
      "è¿™æ¬¡å¤±å»ä¼šè®©æˆ‘æ›´çæƒœæœªæ¥ã€‚",
      "å¤±è½ä¸æ˜¯ç»ˆç‚¹ï¼Œæ˜¯è½¬å¼¯å¤„çš„é£æ™¯ã€‚",
      "æˆ‘æ­£åœ¨å­¦ä¹ ä¸å¤±å»å…±å¤„ã€‚",
      "æˆ‘å¤±å»äº†ä»€ä¹ˆï¼Œä½†æ²¡æœ‰å¤±å»è‡ªå·±ã€‚",
      "æ¯ä¸€æ¬¡å¤±è½éƒ½æ˜¯æˆé•¿çš„é‚€è¯·ã€‚",
      "æˆ‘ä¼šé‡æ–°æ‰¾åˆ°å±äºè‡ªå·±çš„æ„ä¹‰ã€‚"
    ]
  }
];

// å››ä¸ªé˜¶æ®µå®šä¹‰
const stages = [
  { name: "è§‰å¯Ÿ", englishName: "Feel it", description: "æ„Ÿå—å¹¶å‘½åæƒ…ç»ª", reminderRange: [0, 7] },
  { name: "ç†è§£", englishName: "Understand", description: "ç†è§£æƒ…ç»ªèƒŒåçš„åŸå› ", reminderRange: [8, 15] },
  { name: "ç¨³å®š", englishName: "Stabilize", description: "é€šè¿‡å‘¼å¸å’Œè¡ŒåŠ¨ç¨³å®šèº«å¿ƒ", reminderRange: [16, 23] },
  { name: "è½¬åŒ–", englishName: "Transform", description: "è½¬åŒ–æƒ…ç»ªä¸ºæˆé•¿åŠ›é‡", reminderRange: [24, 31] }
];

serve(async (req) => {
  // Handle CORS preflight requests
  if (req.method === 'OPTIONS') {
    return new Response(null, { headers: corsHeaders });
  }

  try {
    const url = new URL(req.url);
    const emotionId = url.searchParams.get('emotion_id');
    const format = url.searchParams.get('format') || 'full'; // full, simple, reminders_only

    // æ„å»ºå“åº”æ•°æ®
    let responseData: any;

    if (emotionId) {
      // è·å–å•ä¸ªæƒ…ç»ªæ•°æ®
      const emotion = emotionTypes.find(e => e.id === emotionId);
      if (!emotion) {
        return new Response(
          JSON.stringify({ error: 'Emotion not found', available_emotions: emotionTypes.map(e => e.id) }),
          { status: 404, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
        );
      }
      responseData = formatEmotionData(emotion, format);
    } else {
      // è·å–æ‰€æœ‰æƒ…ç»ªæ•°æ®
      responseData = {
        api_version: "1.0.0",
        total_emotions: emotionTypes.length,
        total_reminders: emotionTypes.length * 32,
        stages: stages.map(s => ({
          name: s.name,
          english_name: s.englishName,
          description: s.description,
          reminder_count: 8
        })),
        scientific_basis: {
          theories: [
            { name: "å¤šè¿·èµ°ç¥ç»ç†è®º", author: "Stephen Porges", description: "è§£é‡Šèº«ä½“å®‰å…¨æ„Ÿä¸ç¥ç»è°ƒèŠ‚" },
            { name: "è®¤çŸ¥è¡Œä¸ºç–—æ³• (CBT)", author: "Aaron Beck", description: "è®¤çŸ¥é‡æ„æ”¹å˜æƒ…ç»ªååº”" },
            { name: "è‡ªæˆ‘æ•ˆèƒ½ç†è®º", author: "Albert Bandura", description: "è‡ªæˆ‘è‚¯å®šè¯­å¥å¢å¼ºä¿¡å¿ƒ" },
            { name: "å®‰å…¨å­¦ä¹ ç†è®º", author: "Michelle Craske", description: "é‡å¤å®‰å…¨ä½“éªŒé‡å¡‘ç¥ç»é€šè·¯" }
          ]
        },
        emotions: emotionTypes.map(e => formatEmotionData(e, format))
      };
    }

    return new Response(
      JSON.stringify(responseData, null, 2),
      { 
        headers: { 
          ...corsHeaders, 
          'Content-Type': 'application/json; charset=utf-8'
        } 
      }
    );

  } catch (error: unknown) {
    console.error('Error:', error);
    const message = error instanceof Error ? error.message : 'Unknown error';
    return new Response(
      JSON.stringify({ error: message }),
      { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }
    );
  }
});

function formatEmotionData(emotion: typeof emotionTypes[0], format: string) {
  const gradientColors = gradientColorMap[emotion.gradient] || { from: '#000', to: '#000' };
  const bgColors = bgGradientColorMap[emotion.bgGradient] || { from: '#FFF', via: '#FFF', to: '#FFF' };

  const baseData = {
    id: emotion.id,
    title: emotion.title,
    subtitle: emotion.subtitle,
    emoji: emotion.emoji,
    colors: {
      gradient: gradientColors,
      background: bgColors,
      stages: {
        primary: colorMap[emotion.stageColors.primary] || '#000',
        secondary: colorMap[emotion.stageColors.secondary] || '#000',
        tertiary: colorMap[emotion.stageColors.tertiary] || '#000',
        quaternary: colorMap[emotion.stageColors.quaternary] || '#000'
      }
    }
  };

  if (format === 'simple') {
    return baseData;
  }

  if (format === 'reminders_only') {
    return {
      id: emotion.id,
      title: emotion.title,
      reminders: emotion.reminders
    };
  }

  // full format
  return {
    ...baseData,
    stages: stages.map((stage, index) => ({
      stage_number: index + 1,
      name: stage.name,
      english_name: stage.englishName,
      description: stage.description,
      color: colorMap[Object.values(emotion.stageColors)[index]] || '#000',
      reminders: emotion.reminders.slice(stage.reminderRange[0], stage.reminderRange[1] + 1)
    })),
    total_reminders: emotion.reminders.length
  };
}
